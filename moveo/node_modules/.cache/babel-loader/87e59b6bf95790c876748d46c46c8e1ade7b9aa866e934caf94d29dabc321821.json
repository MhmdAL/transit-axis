{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/mhmdal/Projects/moveo-master/moveo/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useEffect}from'react';import{MapContainer,TileLayer,Marker,useMapEvents}from'react-leaflet';import L from'leaflet';import styled from'styled-components';import{theme}from'../../styles/theme';// Fix for default markers in React Leaflet\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});const MapWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 400px;\\n  border: 2px solid \",\";\\n  border-radius: \",\";\\n  overflow: hidden;\\n  \\n  .leaflet-container {\\n    height: 100%;\\n    width: 100%;\\n    background: \",\";\\n  }\\n  \\n  .leaflet-control-container {\\n    .leaflet-control-zoom {\\n      background: \",\";\\n      border: 1px solid \",\";\\n      \\n      a {\\n        background: \",\";\\n        color: \",\";\\n        border-bottom: 1px solid \",\";\\n        \\n        &:hover {\\n          background: \",\";\\n        }\\n        \\n        &:last-child {\\n          border-bottom: none;\\n        }\\n      }\\n    }\\n    \\n    .leaflet-control-attribution {\\n      background: rgba(0, 0, 0, 0.8);\\n      color: white;\\n      font-size: 11px;\\n      \\n      a {\\n        color: #3b82f6;\\n      }\\n    }\\n  }\\n\"])),theme.colors.border,theme.borderRadius.lg,theme.colors.surface,theme.colors.card,theme.colors.border,theme.colors.card,theme.colors.textPrimary,theme.colors.border,theme.colors.cardHover);const MapInfo=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: \",\";\\n  left: \",\";\\n  background: rgba(0, 0, 0, 0.8);\\n  color: white;\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  z-index: 1000;\\n  pointer-events: none;\\n\"])),theme.spacing.md,theme.spacing.md,theme.spacing.sm,theme.spacing.md,theme.borderRadius.md,theme.typography.fontSize.sm);const CoordinatesDisplay=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: \",\";\\n  right: \",\";\\n  background: rgba(0, 0, 0, 0.8);\\n  color: white;\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  font-family: \",\";\\n  z-index: 1000;\\n  pointer-events: none;\\n\"])),theme.spacing.md,theme.spacing.md,theme.spacing.sm,theme.spacing.md,theme.borderRadius.md,theme.typography.fontSize.xs,theme.typography.fontFamily.mono.join(', '));// Component to handle map clicks\nconst MapClickHandler=_ref=>{let{onLocationSelect}=_ref;useMapEvents({click:e=>{const{lat,lng}=e.latlng;onLocationSelect(lat,lng);}});return null;};const InteractiveMap=_ref2=>{let{onLocationSelect,selectedLocation,center:propCenter,zoom=13}=_ref2;const[center,setCenter]=useState(propCenter||{lat:25.2854,lng:51.5310}// Default to Doha, Qatar\n);const[isLoadingLocation,setIsLoadingLocation]=useState(!propCenter);useEffect(()=>{// Only get user location if no center was provided as prop\nif(!propCenter){if(navigator.geolocation){setIsLoadingLocation(true);navigator.geolocation.getCurrentPosition(position=>{setCenter({lat:position.coords.latitude,lng:position.coords.longitude});setIsLoadingLocation(false);},error=>{console.warn('Error getting user location:',error);// Keep default NYC location\nsetIsLoadingLocation(false);},{enableHighAccuracy:true,timeout:10000,maximumAge:300000// 5 minutes\n});}else{console.warn('Geolocation is not supported by this browser');setIsLoadingLocation(false);}}},[propCenter]);if(isLoadingLocation){return/*#__PURE__*/_jsx(MapWrapper,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100%',color:theme.colors.textSecondary,flexDirection:'column',gap:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'24px'},children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Getting your location...\"})]})});}return/*#__PURE__*/_jsxs(MapWrapper,{children:[/*#__PURE__*/_jsx(MapInfo,{children:\"Click anywhere on the map to select a location\"}),/*#__PURE__*/_jsxs(MapContainer,{center:[center.lat,center.lng],zoom:zoom,style:{height:'100%',width:'100%'},whenReady:()=>{// Map is ready\n},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(MapClickHandler,{onLocationSelect:onLocationSelect}),selectedLocation&&/*#__PURE__*/_jsx(Marker,{position:[selectedLocation.lat,selectedLocation.lng]})]}),selectedLocation&&/*#__PURE__*/_jsxs(CoordinatesDisplay,{children:[\"Lat: \",selectedLocation.lat.toFixed(6),\", Lng: \",selectedLocation.lng.toFixed(6)]})]});};export default InteractiveMap;","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","useMapEvents","L","styled","theme","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapWrapper","div","_templateObject","_taggedTemplateLiteral","colors","border","borderRadius","lg","surface","card","textPrimary","cardHover","MapInfo","_templateObject2","spacing","md","sm","typography","fontSize","CoordinatesDisplay","_templateObject3","xs","fontFamily","mono","join","MapClickHandler","_ref","onLocationSelect","click","e","lat","lng","latlng","InteractiveMap","_ref2","selectedLocation","center","propCenter","zoom","setCenter","isLoadingLocation","setIsLoadingLocation","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","console","warn","enableHighAccuracy","timeout","maximumAge","children","style","display","alignItems","justifyContent","height","color","textSecondary","flexDirection","gap","width","whenReady","attribution","url","toFixed"],"sources":["/home/mhmdal/Projects/moveo-master/moveo/src/components/Map/InteractiveMap.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\nimport L from 'leaflet';\nimport styled from 'styled-components';\nimport { theme } from '../../styles/theme';\n\n// Fix for default markers in React Leaflet\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst MapWrapper = styled.div`\n  width: 100%;\n  height: 400px;\n  border: 2px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.lg};\n  overflow: hidden;\n  \n  .leaflet-container {\n    height: 100%;\n    width: 100%;\n    background: ${theme.colors.surface};\n  }\n  \n  .leaflet-control-container {\n    .leaflet-control-zoom {\n      background: ${theme.colors.card};\n      border: 1px solid ${theme.colors.border};\n      \n      a {\n        background: ${theme.colors.card};\n        color: ${theme.colors.textPrimary};\n        border-bottom: 1px solid ${theme.colors.border};\n        \n        &:hover {\n          background: ${theme.colors.cardHover};\n        }\n        \n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n    \n    .leaflet-control-attribution {\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      font-size: 11px;\n      \n      a {\n        color: #3b82f6;\n      }\n    }\n  }\n`;\n\nconst MapInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  left: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n`;\n\nconst CoordinatesDisplay = styled.div`\n  position: absolute;\n  bottom: ${theme.spacing.md};\n  right: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.xs};\n  font-family: ${theme.typography.fontFamily.mono.join(', ')};\n  z-index: 1000;\n  pointer-events: none;\n`;\n\ninterface InteractiveMapProps {\n  onLocationSelect: (lat: number, lng: number) => void;\n  selectedLocation?: { lat: number; lng: number } | null;\n  center?: { lat: number; lng: number };\n  zoom?: number;\n}\n\n// Component to handle map clicks\nconst MapClickHandler: React.FC<{ onLocationSelect: (lat: number, lng: number) => void }> = ({ \n  onLocationSelect \n}) => {\n  useMapEvents({\n    click: (e) => {\n      const { lat, lng } = e.latlng;\n      onLocationSelect(lat, lng);\n    },\n  });\n  \n  return null;\n};\n\nconst InteractiveMap: React.FC<InteractiveMapProps> = ({ \n  onLocationSelect, \n  selectedLocation,\n  center: propCenter,\n  zoom = 13\n}) => {\n  const [center, setCenter] = useState<{ lat: number; lng: number }>(\n    propCenter || { lat: 25.2854, lng: 51.5310 } // Default to Doha, Qatar\n  );\n  const [isLoadingLocation, setIsLoadingLocation] = useState(!propCenter);\n\n  useEffect(() => {\n    // Only get user location if no center was provided as prop\n    if (!propCenter) {\n      if (navigator.geolocation) {\n        setIsLoadingLocation(true);\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setCenter({\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            });\n            setIsLoadingLocation(false);\n          },\n          (error) => {\n            console.warn('Error getting user location:', error);\n            // Keep default NYC location\n            setIsLoadingLocation(false);\n          },\n          {\n            enableHighAccuracy: true,\n            timeout: 10000,\n            maximumAge: 300000 // 5 minutes\n          }\n        );\n      } else {\n        console.warn('Geolocation is not supported by this browser');\n        setIsLoadingLocation(false);\n      }\n    }\n  }, [propCenter]);\n\n  if (isLoadingLocation) {\n    return (\n      <MapWrapper>\n        <div style={{ \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center', \n          height: '100%',\n          color: theme.colors.textSecondary,\n          flexDirection: 'column',\n          gap: '16px'\n        }}>\n          <div style={{ fontSize: '24px' }}>üìç</div>\n          <div>Getting your location...</div>\n        </div>\n      </MapWrapper>\n    );\n  }\n\n  return (\n    <MapWrapper>\n      <MapInfo>\n        Click anywhere on the map to select a location\n      </MapInfo>\n      \n      <MapContainer\n        center={[center.lat, center.lng]}\n        zoom={zoom}\n        style={{ height: '100%', width: '100%' }}\n        whenReady={() => {\n          // Map is ready\n        }}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        <MapClickHandler onLocationSelect={onLocationSelect} />\n        \n        {selectedLocation && (\n          <Marker \n            position={[selectedLocation.lat, selectedLocation.lng]}\n          />\n        )}\n      </MapContainer>\n      \n      {selectedLocation && (\n        <CoordinatesDisplay>\n          Lat: {selectedLocation.lat.toFixed(6)}, Lng: {selectedLocation.lng.toFixed(6)}\n        </CoordinatesDisplay>\n      )}\n    </MapWrapper>\n  );\n};\n\nexport default InteractiveMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}