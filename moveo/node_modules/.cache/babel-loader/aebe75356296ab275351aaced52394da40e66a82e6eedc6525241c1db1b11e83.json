{"ast":null,"code":"var _jsxFileName = \"/home/mhmdal/Projects/moveo/src/components/Map/RouteMap.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Polyline, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport styled from 'styled-components';\nimport { theme } from '../../styles/theme';\nimport { RoutingService } from '../../services/routingService';\n\n// Fix for default markers in React Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst MapWrapper = styled.div`\n  width: 100%;\n  height: ${({\n  height\n}) => height || '500px'};\n  border: 2px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.lg};\n  overflow: hidden;\n  \n  .leaflet-container {\n    height: 100%;\n    width: 100%;\n    background: ${theme.colors.surface};\n  }\n  \n  .leaflet-control-container {\n    .leaflet-control-zoom {\n      background: ${theme.colors.card};\n      border: 1px solid ${theme.colors.border};\n      \n      a {\n        background: ${theme.colors.card};\n        color: ${theme.colors.textPrimary};\n        border-bottom: 1px solid ${theme.colors.border};\n        \n        &:hover {\n          background: ${theme.colors.cardHover};\n        }\n        \n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n    \n    .leaflet-control-attribution {\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      font-size: 11px;\n      \n      a {\n        color: #3b82f6;\n      }\n    }\n  }\n  \n  .leaflet-popup-content-wrapper {\n    background: ${theme.colors.card};\n    color: ${theme.colors.textPrimary};\n    border-radius: ${theme.borderRadius.md};\n    box-shadow: ${theme.shadows.lg};\n  }\n  \n  .leaflet-popup-tip {\n    background: ${theme.colors.card};\n  }\n\n  /* Custom marker styles for interactive stops */\n  .leaflet-marker-icon {\n    cursor: pointer;\n    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;\n    \n    &:hover {\n      transform: scale(1.1);\n      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));\n    }\n  }\n`;\n_c = MapWrapper;\nconst MapInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  left: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  max-width: 250px;\n`;\n_c2 = MapInfo;\nconst RouteInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  right: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  min-width: 150px;\n`;\n_c3 = RouteInfo;\nconst RouteInfoItem = styled.div`\n  margin: 2px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\n_c4 = RouteInfoItem;\nconst PopupContent = styled.div`\n  min-width: 200px;\n`;\n_c5 = PopupContent;\nconst PopupTitle = styled.h4`\n  margin: 0 0 ${theme.spacing.sm} 0;\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n`;\n_c6 = PopupTitle;\nconst PopupDetail = styled.div`\n  margin: ${theme.spacing.xs} 0;\n  font-size: ${theme.typography.fontSize.xs};\n  color: ${theme.colors.textSecondary};\n`;\n\n// Component to handle map bounds fitting\n_c7 = PopupDetail;\nconst MapBoundsHandler = ({\n  selectedStops\n}) => {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (selectedStops.length > 0) {\n      // Create bounds from selected stops\n      const bounds = L.latLngBounds(selectedStops.map(stop => [stop.location.lat, stop.location.lon]));\n\n      // Fit the map to show all selected stops with some padding\n      if (selectedStops.length === 1) {\n        // For single stop, just center on it with a reasonable zoom\n        map.setView([selectedStops[0].location.lat, selectedStops[0].location.lon], 14);\n      } else {\n        // For multiple stops, fit bounds with padding\n        map.fitBounds(bounds, {\n          padding: [20, 20],\n          maxZoom: 16\n        });\n      }\n    }\n  }, [map, selectedStops]);\n  return null;\n};\n_s(MapBoundsHandler, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c8 = MapBoundsHandler;\nconst RouteMap = ({\n  stops,\n  selectedStops,\n  center,\n  zoom = 12,\n  showRoute = true,\n  height,\n  onStopClick\n}) => {\n  _s2();\n  // Default center - Qatar (Doha) if no center provided\n  const defaultCenter = center || {\n    lat: 25.2854,\n    lng: 51.5310\n  };\n\n  // State for route data\n  const [routeData, setRouteData] = useState(null);\n  const [isCalculatingRoute, setIsCalculatingRoute] = useState(false);\n\n  // Calculate route when selected stops change\n  useEffect(() => {\n    // Create an AbortController for this effect\n    const abortController = new AbortController();\n    let timeoutId;\n    if (selectedStops.length >= 2 && showRoute) {\n      setIsCalculatingRoute(true);\n      const waypoints = selectedStops.map(stop => ({\n        lat: stop.location.lat,\n        lng: stop.location.lon\n      }));\n\n      // Create a stable key for this route calculation\n      //   const routeKey = waypoints.map(w => `${w.lat.toFixed(6)},${w.lng.toFixed(6)}`).join('|');\n\n      // Add a longer delay to avoid excessive API calls during hot reload\n      timeoutId = setTimeout(async () => {\n        // Check if component is still mounted and request not aborted\n        if (abortController.signal.aborted) {\n          return;\n        }\n        try {\n          const route = await RoutingService.calculateRoute(waypoints, abortController.signal);\n\n          // Check again if component is still mounted\n          if (!abortController.signal.aborted) {\n            setRouteData(route);\n            setIsCalculatingRoute(false);\n          }\n        } catch (error) {\n          // Only handle error if not aborted\n          if (!abortController.signal.aborted) {\n            console.error('Failed to calculate route:', error);\n            setIsCalculatingRoute(false);\n            // Fallback to straight line\n            setRouteData({\n              coordinates: waypoints,\n              distance: 0,\n              duration: 0\n            });\n          }\n        }\n      }, 1000); // Increased to 1 second to reduce hot reload requests\n    } else {\n      setRouteData(null);\n      setIsCalculatingRoute(false);\n    }\n\n    // Cleanup function\n    return () => {\n      abortController.abort();\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [selectedStops, showRoute]);\n\n  // Create route line coordinates for Leaflet Polyline\n  const routeCoordinates = routeData ? routeData.coordinates.map(coord => [coord.lat, coord.lng]) : selectedStops.map(stop => [stop.location.lat, stop.location.lon]);\n  return /*#__PURE__*/_jsxDEV(MapWrapper, {\n    children: [onStopClick && /*#__PURE__*/_jsxDEV(MapInfo, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '12px',\n          opacity: 0.8\n        },\n        children: \"\\uD83D\\uDCCD Click stops to add to route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), isCalculatingRoute && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '4px',\n          fontSize: '12px',\n          opacity: 0.8,\n          color: '#3b82f6'\n        },\n        children: \"\\uD83D\\uDEE3\\uFE0F Calculating road route...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 13\n      }, this), selectedStops.length === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '4px',\n          fontSize: '12px',\n          opacity: 0.8\n        },\n        children: \"Add another stop to see route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this), routeData && routeData.distance > 0 && /*#__PURE__*/_jsxDEV(RouteInfo, {\n      children: [/*#__PURE__*/_jsxDEV(RouteInfoItem, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Distance:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: RoutingService.formatDistance(routeData.distance)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RouteInfoItem, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Duration:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: RoutingService.formatDuration(routeData.duration)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '10px',\n          opacity: 0.7,\n          marginTop: '4px'\n        },\n        children: \"\\uD83D\\uDEE3\\uFE0F Road route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 9\n    }, this), routeData && routeData.distance === 0 && selectedStops.length > 1 && /*#__PURE__*/_jsxDEV(RouteInfo, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '12px',\n          opacity: 0.8\n        },\n        children: \"\\uD83D\\uDCCF Straight line route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '10px',\n          opacity: 0.6,\n          marginTop: '2px'\n        },\n        children: \"Road routing unavailable\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [defaultCenter.lat, defaultCenter.lng],\n      zoom: zoom,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapBoundsHandler, {\n        selectedStops: selectedStops\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), stops.map(stop => {\n        const isSelected = selectedStops.some(s => s.id === stop.id);\n        const selectedIndex = selectedStops.findIndex(s => s.id === stop.id);\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: [stop.location.lat, stop.location.lon],\n          opacity: isSelected ? 1 : 0.6,\n          eventHandlers: {\n            click: () => {\n              if (onStopClick) {\n                onStopClick(stop);\n              }\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: /*#__PURE__*/_jsxDEV(PopupContent, {\n              children: [/*#__PURE__*/_jsxDEV(PopupTitle, {\n                children: stop.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(PopupDetail, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Code:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 32\n                }, this), \" \", stop.code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 19\n              }, this), isSelected && /*#__PURE__*/_jsxDEV(PopupDetail, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Order:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 34\n                }, this), \" #\", selectedIndex + 1, \" in route\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this), onStopClick && !isSelected && /*#__PURE__*/_jsxDEV(PopupDetail, {\n                style: {\n                  color: theme.colors.primary,\n                  fontWeight: 'bold',\n                  marginTop: '8px'\n                },\n                children: \"Click to add to route\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)\n        }, stop.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this);\n      }), showRoute && selectedStops.length > 1 && routeCoordinates.length > 0 && /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: routeCoordinates,\n        color: routeData ? theme.colors.primary : theme.colors.secondary,\n        weight: routeData ? 5 : 4,\n        opacity: routeData ? 0.9 : 0.6,\n        dashArray: routeData ? undefined : \"10, 5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n};\n_s2(RouteMap, \"Gjy1WMTImnskKV6tXh1vUeVoidw=\");\n_c9 = RouteMap;\nexport default RouteMap;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"MapWrapper\");\n$RefreshReg$(_c2, \"MapInfo\");\n$RefreshReg$(_c3, \"RouteInfo\");\n$RefreshReg$(_c4, \"RouteInfoItem\");\n$RefreshReg$(_c5, \"PopupContent\");\n$RefreshReg$(_c6, \"PopupTitle\");\n$RefreshReg$(_c7, \"PopupDetail\");\n$RefreshReg$(_c8, \"MapBoundsHandler\");\n$RefreshReg$(_c9, \"RouteMap\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Polyline","Popup","useMap","L","styled","theme","RoutingService","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapWrapper","div","height","colors","border","borderRadius","lg","surface","card","textPrimary","cardHover","md","shadows","_c","MapInfo","spacing","sm","typography","fontSize","_c2","RouteInfo","_c3","RouteInfoItem","_c4","PopupContent","_c5","PopupTitle","h4","_c6","PopupDetail","xs","textSecondary","_c7","MapBoundsHandler","selectedStops","_s","map","length","bounds","latLngBounds","stop","location","lat","lon","setView","fitBounds","padding","maxZoom","_c8","RouteMap","stops","center","zoom","showRoute","onStopClick","_s2","defaultCenter","lng","routeData","setRouteData","isCalculatingRoute","setIsCalculatingRoute","abortController","AbortController","timeoutId","waypoints","setTimeout","signal","aborted","route","calculateRoute","error","console","coordinates","distance","duration","abort","clearTimeout","routeCoordinates","coord","children","style","opacity","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","color","formatDistance","formatDuration","width","attribution","url","isSelected","some","s","id","selectedIndex","findIndex","position","eventHandlers","click","name","code","primary","fontWeight","positions","secondary","weight","dashArray","undefined","_c9","$RefreshReg$"],"sources":["/home/mhmdal/Projects/moveo/src/components/Map/RouteMap.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Polyline, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport styled from 'styled-components';\nimport { theme } from '../../styles/theme';\nimport { Stop } from '../../types';\nimport { RoutingService, RouteResponse, RouteCoordinate } from '../../services/routingService';\n\n// Fix for default markers in React Leaflet\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst MapWrapper = styled.div<{ height?: string }>`\n  width: 100%;\n  height: ${({ height }) => height || '500px'};\n  border: 2px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.lg};\n  overflow: hidden;\n  \n  .leaflet-container {\n    height: 100%;\n    width: 100%;\n    background: ${theme.colors.surface};\n  }\n  \n  .leaflet-control-container {\n    .leaflet-control-zoom {\n      background: ${theme.colors.card};\n      border: 1px solid ${theme.colors.border};\n      \n      a {\n        background: ${theme.colors.card};\n        color: ${theme.colors.textPrimary};\n        border-bottom: 1px solid ${theme.colors.border};\n        \n        &:hover {\n          background: ${theme.colors.cardHover};\n        }\n        \n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n    \n    .leaflet-control-attribution {\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      font-size: 11px;\n      \n      a {\n        color: #3b82f6;\n      }\n    }\n  }\n  \n  .leaflet-popup-content-wrapper {\n    background: ${theme.colors.card};\n    color: ${theme.colors.textPrimary};\n    border-radius: ${theme.borderRadius.md};\n    box-shadow: ${theme.shadows.lg};\n  }\n  \n  .leaflet-popup-tip {\n    background: ${theme.colors.card};\n  }\n\n  /* Custom marker styles for interactive stops */\n  .leaflet-marker-icon {\n    cursor: pointer;\n    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;\n    \n    &:hover {\n      transform: scale(1.1);\n      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));\n    }\n  }\n`;\n\nconst MapInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  left: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  max-width: 250px;\n`;\n\nconst RouteInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  right: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  min-width: 150px;\n`;\n\nconst RouteInfoItem = styled.div`\n  margin: 2px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\n\nconst PopupContent = styled.div`\n  min-width: 200px;\n`;\n\nconst PopupTitle = styled.h4`\n  margin: 0 0 ${theme.spacing.sm} 0;\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n`;\n\nconst PopupDetail = styled.div`\n  margin: ${theme.spacing.xs} 0;\n  font-size: ${theme.typography.fontSize.xs};\n  color: ${theme.colors.textSecondary};\n`;\n\n// Component to handle map bounds fitting\nconst MapBoundsHandler: React.FC<{ selectedStops: Stop[] }> = ({ selectedStops }) => {\n  const map = useMap();\n\n  useEffect(() => {\n    if (selectedStops.length > 0) {\n      // Create bounds from selected stops\n      const bounds = L.latLngBounds(\n        selectedStops.map(stop => [stop.location.lat, stop.location.lon])\n      );\n\n      // Fit the map to show all selected stops with some padding\n      if (selectedStops.length === 1) {\n        // For single stop, just center on it with a reasonable zoom\n        map.setView([selectedStops[0].location.lat, selectedStops[0].location.lon], 14);\n      } else {\n        // For multiple stops, fit bounds with padding\n        map.fitBounds(bounds, { \n          padding: [20, 20],\n          maxZoom: 16 \n        });\n      }\n    }\n  }, [map, selectedStops]);\n\n  return null;\n};\n\ninterface RouteMapProps {\n  stops: Stop[];\n  selectedStops: Stop[];\n  center?: { lat: number; lng: number };\n  zoom?: number;\n  showRoute?: boolean;\n  height?: string;\n  onStopClick?: (stop: Stop) => void;\n  onFitRoute?: () => void;\n}\n\nconst RouteMap: React.FC<RouteMapProps> = ({ \n  stops,\n  selectedStops,\n  center,\n  zoom = 12,\n  showRoute = true,\n  height,\n  onStopClick\n}) => {\n  // Default center - Qatar (Doha) if no center provided\n  const defaultCenter = center || { lat: 25.2854, lng: 51.5310 };\n  \n  // State for route data\n  const [routeData, setRouteData] = useState<RouteResponse | null>(null);\n  const [isCalculatingRoute, setIsCalculatingRoute] = useState(false);\n\n  // Calculate route when selected stops change\n  useEffect(() => {\n    // Create an AbortController for this effect\n    const abortController = new AbortController();\n    let timeoutId: NodeJS.Timeout;\n\n    if (selectedStops.length >= 2 && showRoute) {\n      setIsCalculatingRoute(true);\n      \n      const waypoints: RouteCoordinate[] = selectedStops.map(stop => ({\n        lat: stop.location.lat,\n        lng: stop.location.lon\n      }));\n\n      // Create a stable key for this route calculation\n    //   const routeKey = waypoints.map(w => `${w.lat.toFixed(6)},${w.lng.toFixed(6)}`).join('|');\n      \n      // Add a longer delay to avoid excessive API calls during hot reload\n      timeoutId = setTimeout(async () => {\n        // Check if component is still mounted and request not aborted\n        if (abortController.signal.aborted) {\n          return;\n        }\n\n        try {\n          const route = await RoutingService.calculateRoute(waypoints, abortController.signal);\n          \n          // Check again if component is still mounted\n          if (!abortController.signal.aborted) {\n            setRouteData(route);\n            setIsCalculatingRoute(false);\n          }\n        } catch (error) {\n          // Only handle error if not aborted\n          if (!abortController.signal.aborted) {\n            console.error('Failed to calculate route:', error);\n            setIsCalculatingRoute(false);\n            // Fallback to straight line\n            setRouteData({\n              coordinates: waypoints,\n              distance: 0,\n              duration: 0\n            });\n          }\n        }\n      }, 1000); // Increased to 1 second to reduce hot reload requests\n\n    } else {\n      setRouteData(null);\n      setIsCalculatingRoute(false);\n    }\n\n    // Cleanup function\n    return () => {\n      abortController.abort();\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [selectedStops, showRoute]);\n\n  // Create route line coordinates for Leaflet Polyline\n  const routeCoordinates: [number, number][] = routeData \n    ? routeData.coordinates.map(coord => [coord.lat, coord.lng])\n    : selectedStops.map(stop => [stop.location.lat, stop.location.lon]);\n\n  return (\n    <MapWrapper>\n      {onStopClick && (\n        <MapInfo>\n          <div style={{ fontSize: '12px', opacity: 0.8 }}>\n            üìç Click stops to add to route\n          </div>\n          {isCalculatingRoute && (\n            <div style={{ marginTop: '4px', fontSize: '12px', opacity: 0.8, color: '#3b82f6' }}>\n              üõ£Ô∏è Calculating road route...\n            </div>\n          )}\n          {selectedStops.length === 1 && (\n            <div style={{ marginTop: '4px', fontSize: '12px', opacity: 0.8 }}>\n              Add another stop to see route\n            </div>\n          )}\n        </MapInfo>\n      )}\n      \n      {/* Route Information */}\n      {routeData && routeData.distance > 0 && (\n        <RouteInfo>\n          <RouteInfoItem>\n            <span>Distance:</span>\n            <strong>{RoutingService.formatDistance(routeData.distance)}</strong>\n          </RouteInfoItem>\n          <RouteInfoItem>\n            <span>Duration:</span>\n            <strong>{RoutingService.formatDuration(routeData.duration)}</strong>\n          </RouteInfoItem>\n          <div style={{ fontSize: '10px', opacity: 0.7, marginTop: '4px' }}>\n            üõ£Ô∏è Road route\n          </div>\n        </RouteInfo>\n      )}\n      \n      {/* Show info when only straight line is available */}\n      {routeData && routeData.distance === 0 && selectedStops.length > 1 && (\n        <RouteInfo>\n          <div style={{ fontSize: '12px', opacity: 0.8 }}>\n            üìè Straight line route\n          </div>\n          <div style={{ fontSize: '10px', opacity: 0.6, marginTop: '2px' }}>\n            Road routing unavailable\n          </div>\n        </RouteInfo>\n      )}\n      \n      <MapContainer\n        center={[defaultCenter.lat, defaultCenter.lng]}\n        zoom={zoom}\n        style={{ height: '100%', width: '100%' }}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        {/* Handle automatic bounds fitting when stops change */}\n        <MapBoundsHandler selectedStops={selectedStops} />\n        \n        {/* Show all available stops */}\n        {stops.map((stop) => {\n          const isSelected = selectedStops.some(s => s.id === stop.id);\n          const selectedIndex = selectedStops.findIndex(s => s.id === stop.id);\n          \n          return (\n            <Marker\n              key={stop.id}\n              position={[stop.location.lat, stop.location.lon]}\n              opacity={isSelected ? 1 : 0.6}\n              eventHandlers={{\n                click: () => {\n                  if (onStopClick) {\n                    onStopClick(stop);\n                  }\n                }\n              }}\n            >\n              <Popup>\n                <PopupContent>\n                  <PopupTitle>{stop.name}</PopupTitle>\n                  <PopupDetail><strong>Code:</strong> {stop.code}</PopupDetail>\n                  {isSelected && (\n                    <PopupDetail><strong>Order:</strong> #{selectedIndex + 1} in route</PopupDetail>\n                  )}\n                  {onStopClick && !isSelected && (\n                    <PopupDetail style={{ color: theme.colors.primary, fontWeight: 'bold', marginTop: '8px' }}>\n                      Click to add to route\n                    </PopupDetail>\n                  )}\n                </PopupContent>\n              </Popup>\n            </Marker>\n          );\n        })}\n        \n        {/* Show route line */}\n        {showRoute && selectedStops.length > 1 && routeCoordinates.length > 0 && (\n          <Polyline\n            positions={routeCoordinates}\n            color={routeData ? theme.colors.primary : theme.colors.secondary}\n            weight={routeData ? 5 : 4}\n            opacity={routeData ? 0.9 : 0.6}\n            dashArray={routeData ? undefined : \"10, 5\"}\n          />\n        )}\n      </MapContainer>\n    </MapWrapper>\n  );\n};\n\nexport default RouteMap;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,MAAM,QAAQ,eAAe;AACxF,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,KAAK,QAAQ,oBAAoB;AAE1C,SAASC,cAAc,QAAwC,+BAA+B;;AAE9F;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAQL,CAAC,CAACM,IAAI,CAACC,OAAO,CAACC,SAAS,CAASC,WAAW;AACpDT,CAAC,CAACM,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,aAAa,EAAE,gFAAgF;EAC/FC,OAAO,EAAE,6EAA6E;EACtFC,SAAS,EAAE;AACb,CAAC,CAAC;AAEF,MAAMC,UAAU,GAAGb,MAAM,CAACc,GAAwB;AAClD;AACA,YAAY,CAAC;EAAEC;AAAO,CAAC,KAAKA,MAAM,IAAI,OAAO;AAC7C,sBAAsBd,KAAK,CAACe,MAAM,CAACC,MAAM;AACzC,mBAAmBhB,KAAK,CAACiB,YAAY,CAACC,EAAE;AACxC;AACA;AACA;AACA;AACA;AACA,kBAAkBlB,KAAK,CAACe,MAAM,CAACI,OAAO;AACtC;AACA;AACA;AACA;AACA,oBAAoBnB,KAAK,CAACe,MAAM,CAACK,IAAI;AACrC,0BAA0BpB,KAAK,CAACe,MAAM,CAACC,MAAM;AAC7C;AACA;AACA,sBAAsBhB,KAAK,CAACe,MAAM,CAACK,IAAI;AACvC,iBAAiBpB,KAAK,CAACe,MAAM,CAACM,WAAW;AACzC,mCAAmCrB,KAAK,CAACe,MAAM,CAACC,MAAM;AACtD;AACA;AACA,wBAAwBhB,KAAK,CAACe,MAAM,CAACO,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkBtB,KAAK,CAACe,MAAM,CAACK,IAAI;AACnC,aAAapB,KAAK,CAACe,MAAM,CAACM,WAAW;AACrC,qBAAqBrB,KAAK,CAACiB,YAAY,CAACM,EAAE;AAC1C,kBAAkBvB,KAAK,CAACwB,OAAO,CAACN,EAAE;AAClC;AACA;AACA;AACA,kBAAkBlB,KAAK,CAACe,MAAM,CAACK,IAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACK,EAAA,GAjEIb,UAAU;AAmEhB,MAAMc,OAAO,GAAG3B,MAAM,CAACc,GAAG;AAC1B;AACA,SAASb,KAAK,CAAC2B,OAAO,CAACJ,EAAE;AACzB,UAAUvB,KAAK,CAAC2B,OAAO,CAACJ,EAAE;AAC1B;AACA;AACA,aAAavB,KAAK,CAAC2B,OAAO,CAACC,EAAE,IAAI5B,KAAK,CAAC2B,OAAO,CAACJ,EAAE;AACjD,mBAAmBvB,KAAK,CAACiB,YAAY,CAACM,EAAE;AACxC,eAAevB,KAAK,CAAC6B,UAAU,CAACC,QAAQ,CAACF,EAAE;AAC3C;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAZIL,OAAO;AAcb,MAAMM,SAAS,GAAGjC,MAAM,CAACc,GAAG;AAC5B;AACA,SAASb,KAAK,CAAC2B,OAAO,CAACJ,EAAE;AACzB,WAAWvB,KAAK,CAAC2B,OAAO,CAACJ,EAAE;AAC3B;AACA;AACA,aAAavB,KAAK,CAAC2B,OAAO,CAACC,EAAE,IAAI5B,KAAK,CAAC2B,OAAO,CAACJ,EAAE;AACjD,mBAAmBvB,KAAK,CAACiB,YAAY,CAACM,EAAE;AACxC,eAAevB,KAAK,CAAC6B,UAAU,CAACC,QAAQ,CAACF,EAAE;AAC3C;AACA;AACA;AACA,CAAC;AAACK,GAAA,GAZID,SAAS;AAcf,MAAME,aAAa,GAAGnC,MAAM,CAACc,GAAG;AAChC;AACA;AACA;AACA;AACA,SAASb,KAAK,CAAC2B,OAAO,CAACC,EAAE;AACzB,CAAC;AAACO,GAAA,GANID,aAAa;AAQnB,MAAME,YAAY,GAAGrC,MAAM,CAACc,GAAG;AAC/B;AACA,CAAC;AAACwB,GAAA,GAFID,YAAY;AAIlB,MAAME,UAAU,GAAGvC,MAAM,CAACwC,EAAE;AAC5B,gBAAgBvC,KAAK,CAAC2B,OAAO,CAACC,EAAE;AAChC,WAAW5B,KAAK,CAACe,MAAM,CAACM,WAAW;AACnC,eAAerB,KAAK,CAAC6B,UAAU,CAACC,QAAQ,CAACF,EAAE;AAC3C,CAAC;AAACY,GAAA,GAJIF,UAAU;AAMhB,MAAMG,WAAW,GAAG1C,MAAM,CAACc,GAAG;AAC9B,YAAYb,KAAK,CAAC2B,OAAO,CAACe,EAAE;AAC5B,eAAe1C,KAAK,CAAC6B,UAAU,CAACC,QAAQ,CAACY,EAAE;AAC3C,WAAW1C,KAAK,CAACe,MAAM,CAAC4B,aAAa;AACrC,CAAC;;AAED;AAAAC,GAAA,GANMH,WAAW;AAOjB,MAAMI,gBAAqD,GAAGA,CAAC;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EACnF,MAAMC,GAAG,GAAGnD,MAAM,CAAC,CAAC;EAEpBN,SAAS,CAAC,MAAM;IACd,IAAIuD,aAAa,CAACG,MAAM,GAAG,CAAC,EAAE;MAC5B;MACA,MAAMC,MAAM,GAAGpD,CAAC,CAACqD,YAAY,CAC3BL,aAAa,CAACE,GAAG,CAACI,IAAI,IAAI,CAACA,IAAI,CAACC,QAAQ,CAACC,GAAG,EAAEF,IAAI,CAACC,QAAQ,CAACE,GAAG,CAAC,CAClE,CAAC;;MAED;MACA,IAAIT,aAAa,CAACG,MAAM,KAAK,CAAC,EAAE;QAC9B;QACAD,GAAG,CAACQ,OAAO,CAAC,CAACV,aAAa,CAAC,CAAC,CAAC,CAACO,QAAQ,CAACC,GAAG,EAAER,aAAa,CAAC,CAAC,CAAC,CAACO,QAAQ,CAACE,GAAG,CAAC,EAAE,EAAE,CAAC;MACjF,CAAC,MAAM;QACL;QACAP,GAAG,CAACS,SAAS,CAACP,MAAM,EAAE;UACpBQ,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;UACjBC,OAAO,EAAE;QACX,CAAC,CAAC;MACJ;IACF;EACF,CAAC,EAAE,CAACX,GAAG,EAAEF,aAAa,CAAC,CAAC;EAExB,OAAO,IAAI;AACb,CAAC;AAACC,EAAA,CAzBIF,gBAAqD;EAAA,QAC7ChD,MAAM;AAAA;AAAA+D,GAAA,GADdf,gBAAqD;AAsC3D,MAAMgB,QAAiC,GAAGA,CAAC;EACzCC,KAAK;EACLhB,aAAa;EACbiB,MAAM;EACNC,IAAI,GAAG,EAAE;EACTC,SAAS,GAAG,IAAI;EAChBnD,MAAM;EACNoD;AACF,CAAC,KAAK;EAAAC,GAAA;EACJ;EACA,MAAMC,aAAa,GAAGL,MAAM,IAAI;IAAET,GAAG,EAAE,OAAO;IAAEe,GAAG,EAAE;EAAQ,CAAC;;EAE9D;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGjF,QAAQ,CAAuB,IAAI,CAAC;EACtE,MAAM,CAACkF,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGnF,QAAQ,CAAC,KAAK,CAAC;;EAEnE;EACAC,SAAS,CAAC,MAAM;IACd;IACA,MAAMmF,eAAe,GAAG,IAAIC,eAAe,CAAC,CAAC;IAC7C,IAAIC,SAAyB;IAE7B,IAAI9B,aAAa,CAACG,MAAM,IAAI,CAAC,IAAIgB,SAAS,EAAE;MAC1CQ,qBAAqB,CAAC,IAAI,CAAC;MAE3B,MAAMI,SAA4B,GAAG/B,aAAa,CAACE,GAAG,CAACI,IAAI,KAAK;QAC9DE,GAAG,EAAEF,IAAI,CAACC,QAAQ,CAACC,GAAG;QACtBe,GAAG,EAAEjB,IAAI,CAACC,QAAQ,CAACE;MACrB,CAAC,CAAC,CAAC;;MAEH;MACF;;MAEE;MACAqB,SAAS,GAAGE,UAAU,CAAC,YAAY;QACjC;QACA,IAAIJ,eAAe,CAACK,MAAM,CAACC,OAAO,EAAE;UAClC;QACF;QAEA,IAAI;UACF,MAAMC,KAAK,GAAG,MAAMhF,cAAc,CAACiF,cAAc,CAACL,SAAS,EAAEH,eAAe,CAACK,MAAM,CAAC;;UAEpF;UACA,IAAI,CAACL,eAAe,CAACK,MAAM,CAACC,OAAO,EAAE;YACnCT,YAAY,CAACU,KAAK,CAAC;YACnBR,qBAAqB,CAAC,KAAK,CAAC;UAC9B;QACF,CAAC,CAAC,OAAOU,KAAK,EAAE;UACd;UACA,IAAI,CAACT,eAAe,CAACK,MAAM,CAACC,OAAO,EAAE;YACnCI,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;YAClDV,qBAAqB,CAAC,KAAK,CAAC;YAC5B;YACAF,YAAY,CAAC;cACXc,WAAW,EAAER,SAAS;cACtBS,QAAQ,EAAE,CAAC;cACXC,QAAQ,EAAE;YACZ,CAAC,CAAC;UACJ;QACF;MACF,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAEZ,CAAC,MAAM;MACLhB,YAAY,CAAC,IAAI,CAAC;MAClBE,qBAAqB,CAAC,KAAK,CAAC;IAC9B;;IAEA;IACA,OAAO,MAAM;MACXC,eAAe,CAACc,KAAK,CAAC,CAAC;MACvB,IAAIZ,SAAS,EAAE;QACba,YAAY,CAACb,SAAS,CAAC;MACzB;IACF,CAAC;EACH,CAAC,EAAE,CAAC9B,aAAa,EAAEmB,SAAS,CAAC,CAAC;;EAE9B;EACA,MAAMyB,gBAAoC,GAAGpB,SAAS,GAClDA,SAAS,CAACe,WAAW,CAACrC,GAAG,CAAC2C,KAAK,IAAI,CAACA,KAAK,CAACrC,GAAG,EAAEqC,KAAK,CAACtB,GAAG,CAAC,CAAC,GAC1DvB,aAAa,CAACE,GAAG,CAACI,IAAI,IAAI,CAACA,IAAI,CAACC,QAAQ,CAACC,GAAG,EAAEF,IAAI,CAACC,QAAQ,CAACE,GAAG,CAAC,CAAC;EAErE,oBACEpD,OAAA,CAACS,UAAU;IAAAgF,QAAA,GACR1B,WAAW,iBACV/D,OAAA,CAACuB,OAAO;MAAAkE,QAAA,gBACNzF,OAAA;QAAK0F,KAAK,EAAE;UAAE/D,QAAQ,EAAE,MAAM;UAAEgE,OAAO,EAAE;QAAI,CAAE;QAAAF,QAAA,EAAC;MAEhD;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACL1B,kBAAkB,iBACjBrE,OAAA;QAAK0F,KAAK,EAAE;UAAEM,SAAS,EAAE,KAAK;UAAErE,QAAQ,EAAE,MAAM;UAAEgE,OAAO,EAAE,GAAG;UAAEM,KAAK,EAAE;QAAU,CAAE;QAAAR,QAAA,EAAC;MAEpF;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN,EACApD,aAAa,CAACG,MAAM,KAAK,CAAC,iBACzB9C,OAAA;QAAK0F,KAAK,EAAE;UAAEM,SAAS,EAAE,KAAK;UAAErE,QAAQ,EAAE,MAAM;UAAEgE,OAAO,EAAE;QAAI,CAAE;QAAAF,QAAA,EAAC;MAElE;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACM,CACV,EAGA5B,SAAS,IAAIA,SAAS,CAACgB,QAAQ,GAAG,CAAC,iBAClCnF,OAAA,CAAC6B,SAAS;MAAA4D,QAAA,gBACRzF,OAAA,CAAC+B,aAAa;QAAA0D,QAAA,gBACZzF,OAAA;UAAAyF,QAAA,EAAM;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACtB/F,OAAA;UAAAyF,QAAA,EAAS3F,cAAc,CAACoG,cAAc,CAAC/B,SAAS,CAACgB,QAAQ;QAAC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvD,CAAC,eAChB/F,OAAA,CAAC+B,aAAa;QAAA0D,QAAA,gBACZzF,OAAA;UAAAyF,QAAA,EAAM;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACtB/F,OAAA;UAAAyF,QAAA,EAAS3F,cAAc,CAACqG,cAAc,CAAChC,SAAS,CAACiB,QAAQ;QAAC;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvD,CAAC,eAChB/F,OAAA;QAAK0F,KAAK,EAAE;UAAE/D,QAAQ,EAAE,MAAM;UAAEgE,OAAO,EAAE,GAAG;UAAEK,SAAS,EAAE;QAAM,CAAE;QAAAP,QAAA,EAAC;MAElE;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CACZ,EAGA5B,SAAS,IAAIA,SAAS,CAACgB,QAAQ,KAAK,CAAC,IAAIxC,aAAa,CAACG,MAAM,GAAG,CAAC,iBAChE9C,OAAA,CAAC6B,SAAS;MAAA4D,QAAA,gBACRzF,OAAA;QAAK0F,KAAK,EAAE;UAAE/D,QAAQ,EAAE,MAAM;UAAEgE,OAAO,EAAE;QAAI,CAAE;QAAAF,QAAA,EAAC;MAEhD;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACN/F,OAAA;QAAK0F,KAAK,EAAE;UAAE/D,QAAQ,EAAE,MAAM;UAAEgE,OAAO,EAAE,GAAG;UAAEK,SAAS,EAAE;QAAM,CAAE;QAAAP,QAAA,EAAC;MAElE;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CACZ,eAED/F,OAAA,CAACX,YAAY;MACXuE,MAAM,EAAE,CAACK,aAAa,CAACd,GAAG,EAAEc,aAAa,CAACC,GAAG,CAAE;MAC/CL,IAAI,EAAEA,IAAK;MACX6B,KAAK,EAAE;QAAE/E,MAAM,EAAE,MAAM;QAAEyF,KAAK,EAAE;MAAO,CAAE;MAAAX,QAAA,gBAEzCzF,OAAA,CAACV,SAAS;QACR+G,WAAW,EAAC,yFAAyF;QACrGC,GAAG,EAAC;MAAoD;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eAGF/F,OAAA,CAAC0C,gBAAgB;QAACC,aAAa,EAAEA;MAAc;QAAAiD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAGjDpC,KAAK,CAACd,GAAG,CAAEI,IAAI,IAAK;QACnB,MAAMsD,UAAU,GAAG5D,aAAa,CAAC6D,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKzD,IAAI,CAACyD,EAAE,CAAC;QAC5D,MAAMC,aAAa,GAAGhE,aAAa,CAACiE,SAAS,CAACH,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKzD,IAAI,CAACyD,EAAE,CAAC;QAEpE,oBACE1G,OAAA,CAACT,MAAM;UAELsH,QAAQ,EAAE,CAAC5D,IAAI,CAACC,QAAQ,CAACC,GAAG,EAAEF,IAAI,CAACC,QAAQ,CAACE,GAAG,CAAE;UACjDuC,OAAO,EAAEY,UAAU,GAAG,CAAC,GAAG,GAAI;UAC9BO,aAAa,EAAE;YACbC,KAAK,EAAEA,CAAA,KAAM;cACX,IAAIhD,WAAW,EAAE;gBACfA,WAAW,CAACd,IAAI,CAAC;cACnB;YACF;UACF,CAAE;UAAAwC,QAAA,eAEFzF,OAAA,CAACP,KAAK;YAAAgG,QAAA,eACJzF,OAAA,CAACiC,YAAY;cAAAwD,QAAA,gBACXzF,OAAA,CAACmC,UAAU;gBAAAsD,QAAA,EAAExC,IAAI,CAAC+D;cAAI;gBAAApB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAa,CAAC,eACpC/F,OAAA,CAACsC,WAAW;gBAAAmD,QAAA,gBAACzF,OAAA;kBAAAyF,QAAA,EAAQ;gBAAK;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,EAAC9C,IAAI,CAACgE,IAAI;cAAA;gBAAArB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAc,CAAC,EAC5DQ,UAAU,iBACTvG,OAAA,CAACsC,WAAW;gBAAAmD,QAAA,gBAACzF,OAAA;kBAAAyF,QAAA,EAAQ;gBAAM;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,MAAE,EAACY,aAAa,GAAG,CAAC,EAAC,WAAS;cAAA;gBAAAf,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAa,CAChF,EACAhC,WAAW,IAAI,CAACwC,UAAU,iBACzBvG,OAAA,CAACsC,WAAW;gBAACoD,KAAK,EAAE;kBAAEO,KAAK,EAAEpG,KAAK,CAACe,MAAM,CAACsG,OAAO;kBAAEC,UAAU,EAAE,MAAM;kBAAEnB,SAAS,EAAE;gBAAM,CAAE;gBAAAP,QAAA,EAAC;cAE3F;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAa,CACd;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACW;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV;QAAC,GAxBH9C,IAAI,CAACyD,EAAE;UAAAd,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAyBN,CAAC;MAEb,CAAC,CAAC,EAGDjC,SAAS,IAAInB,aAAa,CAACG,MAAM,GAAG,CAAC,IAAIyC,gBAAgB,CAACzC,MAAM,GAAG,CAAC,iBACnE9C,OAAA,CAACR,QAAQ;QACP4H,SAAS,EAAE7B,gBAAiB;QAC5BU,KAAK,EAAE9B,SAAS,GAAGtE,KAAK,CAACe,MAAM,CAACsG,OAAO,GAAGrH,KAAK,CAACe,MAAM,CAACyG,SAAU;QACjEC,MAAM,EAAEnD,SAAS,GAAG,CAAC,GAAG,CAAE;QAC1BwB,OAAO,EAAExB,SAAS,GAAG,GAAG,GAAG,GAAI;QAC/BoD,SAAS,EAAEpD,SAAS,GAAGqD,SAAS,GAAG;MAAQ;QAAA5B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACW,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEjB,CAAC;AAAC/B,GAAA,CAjMIN,QAAiC;AAAA+D,GAAA,GAAjC/D,QAAiC;AAmMvC,eAAeA,QAAQ;AAAC,IAAApC,EAAA,EAAAM,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAI,GAAA,EAAAgB,GAAA,EAAAgE,GAAA;AAAAC,YAAA,CAAApG,EAAA;AAAAoG,YAAA,CAAA9F,GAAA;AAAA8F,YAAA,CAAA5F,GAAA;AAAA4F,YAAA,CAAA1F,GAAA;AAAA0F,YAAA,CAAAxF,GAAA;AAAAwF,YAAA,CAAArF,GAAA;AAAAqF,YAAA,CAAAjF,GAAA;AAAAiF,YAAA,CAAAjE,GAAA;AAAAiE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}