{"ast":null,"code":"import _objectSpread from\"/home/mhmdal/Projects/moveo-master/moveo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"/home/mhmdal/Projects/moveo-master/moveo/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29,_templateObject30,_templateObject31,_templateObject32,_templateObject33,_templateObject34,_templateObject35,_templateObject36,_templateObject37,_templateObject38,_templateObject39,_templateObject40,_templateObject41,_templateObject42,_templateObject43,_templateObject44,_templateObject45,_templateObject46,_templateObject47,_templateObject48,_templateObject49,_templateObject50,_templateObject51,_templateObject52,_templateObject53,_templateObject54,_templateObject55;import React,{useState,useMemo}from'react';import{FiPlus,FiTrash2,FiClock,FiTruck,FiDroplet,FiX}from'react-icons/fi';import styled from'styled-components';import{theme}from'../../styles/theme';import{apiService}from'../../services/apiService';import AddTemplateForm from'./AddTemplateForm';import BulkTemplateForm from'./BulkTemplateForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TemplateManagerContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: \",\";\\n  padding: \",\";\\n\"])),theme.colors.card,theme.colors.border,theme.borderRadius.lg,theme.spacing.lg);const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: \",\";\\n\"])),theme.spacing.lg);const Title=styled.h3(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  margin: 0;\\n  font-size: \",\";\\n  font-weight: \",\";\\n\"])),theme.colors.textPrimary,theme.typography.fontSize.lg,theme.typography.fontWeight.semibold);const ButtonGroup=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: \",\";\\n\"])),theme.spacing.sm);const AddButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: white;\\n  border: none;\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  font-weight: \",\";\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n  transition: all 0.2s ease;\\n\\n  &:hover {\\n    background: \",\";\\n  }\\n\"])),theme.colors.primary,theme.spacing.sm,theme.spacing.md,theme.borderRadius.md,theme.typography.fontSize.sm,theme.typography.fontWeight.medium,theme.spacing.sm,theme.colors.primaryHover);const TabContainer=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  border-bottom: 1px solid \",\";\\n  margin-bottom: \",\";\\n\"])),theme.colors.border,theme.spacing.lg);const Tab=styled.button(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  background: transparent;\\n  border: none;\\n  border-bottom: 2px solid \",\";\\n  color: \",\";\\n  padding: \",\" \",\";\\n  font-size: \",\";\\n  font-weight: \",\";\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n\\n  &:hover {\\n    color: \",\";\\n    background: \",\";\\n  }\\n\"])),props=>props.active?theme.colors.primary:'transparent',props=>props.active?theme.colors.primary:theme.colors.textSecondary,theme.spacing.sm,theme.spacing.md,theme.typography.fontSize.sm,props=>props.active?theme.typography.fontWeight.semibold:theme.typography.fontWeight.medium,theme.colors.primary,theme.colors.surfaceHover);const ModalOverlay=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  z-index: \",\";\\n\"])),theme.zIndex.modal);const ModalContent=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border-radius: \",\";\\n  padding: \",\";\\n  width: 90%;\\n  max-width: 600px;\\n  max-height: 90vh;\\n  overflow-y: auto;\\n\"])),theme.colors.card,theme.borderRadius.lg,theme.spacing.xl);const ModalHeader=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: \",\";\\n\"])),theme.spacing.lg);const ModalTitle=styled.h3(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  margin: 0;\\n  font-size: \",\";\\n  font-weight: \",\";\\n\"])),theme.colors.textPrimary,theme.typography.fontSize.lg,theme.typography.fontWeight.semibold);const CloseButton=styled.button(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  background: transparent;\\n  border: none;\\n  color: \",\";\\n  cursor: pointer;\\n  padding: \",\";\\n  border-radius: \",\";\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  &:hover {\\n    background: \",\";\\n    color: \",\";\\n  }\\n\"])),theme.colors.textSecondary,theme.spacing.sm,theme.borderRadius.md,theme.colors.surfaceHover,theme.colors.textPrimary);const TimelineContainer=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  position: relative;\\n  min-height: 200px;\\n  background: \",\";\\n  border-radius: \",\";\\n  padding: \",\";\\n  margin-bottom: \",\";\\n\"])),theme.colors.surface,theme.borderRadius.md,theme.spacing.md,theme.spacing.lg);const TimelineHeader=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: \",\";\\n  font-size: \",\";\\n  color: \",\";\\n\"])),theme.spacing.md,theme.typography.fontSize.sm,theme.colors.textSecondary);const TimelineGrid=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: repeat(24, 1fr);\\n  gap: 1px;\\n  height: 120px;\\n  background: \",\";\\n  border-radius: \",\";\\n  overflow: hidden;\\n\"])),theme.colors.border,theme.borderRadius.sm);const HourLabel=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 10px;\\n  color: \",\";\\n  background: \",\";\\n\"])),theme.colors.textMuted,theme.colors.surface);const TemplateBlock=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 40px;\\n  left: \",\"%;\\n  width: \",\"%;\\n  height: 40px;\\n  background: \",\";\\n  border-radius: \",\";\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 0 \",\";\\n  color: white;\\n  font-size: \",\";\\n  font-weight: \",\";\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  z-index: 2;\\n\\n  &:hover {\\n    transform: translateY(-2px);\\n    box-shadow: \",\";\\n  }\\n\"])),props=>props.startHour/24*100,props=>props.duration/24*100,props=>{if(props.isOverlapping)return theme.colors.error;switch(props.dutyType){case'TRIP':return theme.colors.primary;case'WASHING':return'#8b5cf6';case'MAINTENANCE':return'#f59e0b';default:return theme.colors.textMuted;}},theme.borderRadius.sm,theme.spacing.sm,theme.typography.fontSize.xs,theme.typography.fontWeight.medium,theme.shadows.md);const TemplateInfo=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n  flex: 1;\\n  min-width: 0;\\n\"])),theme.spacing.xs);const TemplateActions=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: \",\";\\n  opacity: 0;\\n  transition: opacity 0.2s ease;\\n\\n  \",\":hover & {\\n    opacity: 1;\\n  }\\n\"])),theme.spacing.xs,TemplateBlock);const ActionButton=styled.button(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  background: rgba(255, 255, 255, 0.2);\\n  border: none;\\n  color: white;\\n  padding: 2px;\\n  border-radius: 2px;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 10px;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.3);\\n  }\\n\"])));const TemplatesList=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\\n  gap: \",\";\\n\"])),theme.spacing.xs);const TemplateItem=styled.div(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  position: relative;\\n  padding: \",\" \",\";\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: \",\";\\n  border-left: 3px solid \",\";\\n  font-size: \",\";\\n  cursor: pointer;\\n  transition: all 0.15s ease;\\n\\n  &:hover {\\n    background: \",\";\\n    border-color: \",\";\\n  }\\n\\n  &:hover .delete-btn {\\n    opacity: 1;\\n  }\\n\"])),theme.spacing.xs,theme.spacing.sm,theme.colors.surface,theme.colors.border,theme.borderRadius.sm,props=>{switch(props.dutyType){case'TRIP':return theme.colors.primary;case'WASHING':return'#8b5cf6';case'MAINTENANCE':return'#f59e0b';default:return theme.colors.textMuted;}},theme.typography.fontSize.xs,theme.colors.surfaceHover,props=>{switch(props.dutyType){case'TRIP':return theme.colors.primary;case'WASHING':return'#8b5cf6';case'MAINTENANCE':return'#f59e0b';default:return theme.colors.textMuted;}});const TemplateTime=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  font-size: \",\";\\n  font-weight: \",\";\\n  font-family: monospace;\\n  line-height: 1.4;\\n\"])),theme.colors.textPrimary,theme.typography.fontSize.xs,theme.typography.fontWeight.medium);const DeleteButton=styled.button(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 2px;\\n  right: 2px;\\n  background: \",\";\\n  color: white;\\n  border: none;\\n  width: 16px;\\n  height: 16px;\\n  border-radius: 50%;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  opacity: 0;\\n  transition: opacity 0.15s ease;\\n  font-size: 10px;\\n  padding: 0;\\n\\n  &:hover {\\n    background: \",\";\\n    opacity: 1 !important;\\n    transform: scale(1.1);\\n  }\\n\"])),theme.colors.error,theme.colors.error);const EmptyState=styled.div(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: \",\";\\n  color: \",\";\\n\"])),theme.spacing['2xl'],theme.colors.textMuted);const ErrorMessage=styled.div(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  background: \",\"20;\\n  border: 1px solid \",\";\\n  color: \",\";\\n  padding: \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  margin-bottom: \",\";\\n\"])),theme.colors.error,theme.colors.error,theme.colors.error,theme.spacing.sm,theme.borderRadius.md,theme.typography.fontSize.sm,theme.spacing.md);const ViewToggle=styled.div(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: \",\";\\n  margin-bottom: \",\";\\n\"])),theme.spacing.xs,theme.spacing.md);const ToggleButton=styled.button(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: \",\";\\n  border: 1px solid \",\";\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n\\n  &:hover {\\n    background: \",\";\\n  }\\n\"])),props=>props.active?theme.colors.primary:theme.colors.surface,props=>props.active?'white':theme.colors.textSecondary,props=>props.active?theme.colors.primary:theme.colors.border,theme.spacing.xs,theme.spacing.md,theme.borderRadius.md,theme.typography.fontSize.sm,props=>props.active?theme.colors.primaryHover:theme.colors.surfaceHover);const Section=styled.div(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  margin-bottom: \",\";\\n\"])),theme.spacing.xl);const SectionHeader=styled.div(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: \",\";\\n  padding-bottom: \",\";\\n  border-bottom: 2px solid \",\";\\n\"])),theme.spacing.md,theme.spacing.sm,theme.colors.border);const SectionTitle=styled.h4(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  margin: 0;\\n  font-size: \",\";\\n  font-weight: \",\";\\n\"])),theme.colors.textPrimary,theme.typography.fontSize.base,theme.typography.fontWeight.semibold);const Table=styled.table(_templateObject30||(_templateObject30=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  border-collapse: collapse;\\n  background: \",\";\\n  border-radius: \",\";\\n  overflow: hidden;\\n  margin: \",\" 0;\\n\"])),theme.colors.card,theme.borderRadius.md,theme.spacing.sm);const TableHeader=styled.thead(_templateObject31||(_templateObject31=_taggedTemplateLiteral([\"\\n  background: \",\";\\n\"])),theme.colors.surface);const TableHeaderCell=styled.th(_templateObject32||(_templateObject32=_taggedTemplateLiteral([\"\\n  padding: \",\" \",\";\\n  text-align: left;\\n  font-size: \",\";\\n  font-weight: \",\";\\n  color: \",\";\\n  border-bottom: 2px solid \",\";\\n\"])),theme.spacing.sm,theme.spacing.md,theme.typography.fontSize.sm,theme.typography.fontWeight.semibold,theme.colors.textSecondary,theme.colors.border);const TableBody=styled.tbody(_templateObject33||(_templateObject33=_taggedTemplateLiteral([\"\\n  & > tr:not(:last-child) {\\n    border-bottom: 1px solid \",\";\\n  }\\n\"])),theme.colors.border);const TableRow=styled.tr(_templateObject34||(_templateObject34=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  transition: background 0.2s ease;\\n\\n  &:hover {\\n    background: \",\";\\n  }\\n\"])),props=>props.expanded?theme.colors.surfaceHover:theme.colors.card,theme.colors.surfaceHover);const TableCell=styled.td(_templateObject35||(_templateObject35=_taggedTemplateLiteral([\"\\n  padding: \",\" \",\";\\n  font-size: \",\";\\n  color: \",\";\\n  vertical-align: middle;\\n  background: \",\";\\n  border-left: \",\";\\n  transition: all 0.2s ease;\\n  \\n  \",\"\\n\"])),theme.spacing.sm,theme.spacing.md,theme.typography.fontSize.sm,theme.colors.textPrimary,props=>props.$bgColor?\"color-mix(in srgb, \".concat(props.$bgColor,\" 15%, transparent)\"):'transparent',props=>props.$bgColor?\"3px solid \".concat(props.$bgColor):'none',props=>props.$bgColor&&\"\\n    &:hover {\\n      background: color-mix(in srgb, \".concat(props.$bgColor,\" 25%, transparent);\\n    }\\n  \"));const CodeGroupRow=styled(TableRow)(_templateObject36||(_templateObject36=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  font-weight: \",\";\\n  background: \",\";\\n\"])),theme.typography.fontWeight.medium,theme.colors.surface);const ExpandIcon=styled.div(_templateObject37||(_templateObject37=_taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  align-items: center;\\n  margin-right: \",\";\\n\"])),theme.spacing.xs);const CodeCell=styled(TableCell)(_templateObject38||(_templateObject38=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n\"])),theme.spacing.xs);const EditableCode=styled.div(_templateObject39||(_templateObject39=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n  flex: 1;\\n\"])),theme.spacing.xs);const CodeInput=styled.input(_templateObject40||(_templateObject40=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: \",\";\\n  padding: \",\" \",\";\\n  font-size: \",\";\\n  font-family: monospace;\\n  color: \",\";\\n  min-width: 100px;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: \",\";\\n  }\\n\"])),theme.colors.card,theme.colors.border,theme.borderRadius.sm,theme.spacing.xs,theme.spacing.sm,theme.typography.fontSize.sm,theme.colors.textPrimary,theme.colors.primary);const CodeDisplay=styled.span(_templateObject41||(_templateObject41=_taggedTemplateLiteral([\"\\n  font-family: monospace;\\n  color: \",\";\\n  font-weight: \",\";\\n\"])),theme.colors.textPrimary,theme.typography.fontWeight.medium);const EditButton=styled.button(_templateObject42||(_templateObject42=_taggedTemplateLiteral([\"\\n  background: transparent;\\n  border: none;\\n  color: \",\";\\n  cursor: pointer;\\n  padding: \",\";\\n  border-radius: \",\";\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  opacity: 0;\\n  transition: opacity 0.2s ease;\\n\\n  \",\":hover & {\\n    opacity: 1;\\n  }\\n\\n  &:hover {\\n    background: \",\";\\n    color: \",\";\\n  }\\n\"])),theme.colors.textSecondary,theme.spacing.xs,theme.borderRadius.sm,CodeCell,theme.colors.surfaceHover,theme.colors.primary);const SaveButton=styled.button(_templateObject43||(_templateObject43=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border: none;\\n  color: white;\\n  cursor: pointer;\\n  padding: \",\";\\n  border-radius: \",\";\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  &:hover {\\n    background: \",\";\\n  }\\n\"])),theme.colors.primary,theme.spacing.xs,theme.borderRadius.sm,theme.colors.primaryHover);const TemplateRow=styled(TableRow)(_templateObject44||(_templateObject44=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  \\n  &:hover {\\n    background: \",\";\\n  }\\n\"])),theme.colors.card,theme.colors.surfaceHover);const NestedTemplateCell=styled(TableCell)(_templateObject45||(_templateObject45=_taggedTemplateLiteral([\"\\n  padding-left: \",\";\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n\"])),theme.spacing.xl,theme.spacing.sm);const Select=styled.select(_templateObject46||(_templateObject46=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: \",\";\\n  padding: \",\" \",\";\\n  font-size: \",\";\\n  color: \",\";\\n  cursor: pointer;\\n  min-width: 120px;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: \",\";\\n  }\\n\"])),theme.colors.card,theme.colors.border,theme.borderRadius.sm,theme.spacing.xs,theme.spacing.sm,theme.typography.fontSize.sm,theme.colors.textPrimary,theme.colors.primary);const ActionCell=styled(TableCell)(_templateObject47||(_templateObject47=_taggedTemplateLiteral([\"\\n  text-align: right;\\n  width: 80px;\\n\"])));const IconButton=styled.button(_templateObject48||(_templateObject48=_taggedTemplateLiteral([\"\\n  background: transparent;\\n  border: none;\\n  color: \",\";\\n  cursor: pointer;\\n  padding: \",\";\\n  border-radius: \",\";\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: all 0.2s ease;\\n\\n  &:hover {\\n    background: \",\";\\n    color: \",\";\\n  }\\n\"])),theme.colors.textSecondary,theme.spacing.xs,theme.borderRadius.sm,theme.colors.surfaceHover,theme.colors.error);const Badge=styled.span(_templateObject49||(_templateObject49=_taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  align-items: center;\\n  gap: \",\";\\n  padding: 2px \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  font-weight: \",\";\\n  background: \",\"20;\\n  color: \",\";\\n  border: 1px solid \",\"40;\\n\"])),theme.spacing.xs,theme.spacing.xs,theme.borderRadius.sm,theme.typography.fontSize.xs,theme.typography.fontWeight.medium,props=>props.color,props=>props.color,props=>props.color);const EmptyCodeGroup=styled.div(_templateObject50||(_templateObject50=_taggedTemplateLiteral([\"\\n  padding: \",\";\\n  text-align: center;\\n  color: \",\";\\n  font-size: \",\";\\n\"])),theme.spacing.md,theme.colors.textMuted,theme.typography.fontSize.sm);const CodeList=styled.div(_templateObject51||(_templateObject51=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: \",\";\\n  margin-top: \",\";\\n\"])),theme.spacing.xs,theme.spacing.sm);const CodeItem=styled.div(_templateObject52||(_templateObject52=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n  padding: \",\" \",\";\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: \",\";\\n  font-family: monospace;\\n  font-size: \",\";\\n\"])),theme.spacing.xs,theme.spacing.xs,theme.spacing.sm,theme.colors.surface,theme.colors.border,theme.borderRadius.sm,theme.typography.fontSize.sm);const CodeInputSmall=styled.input(_templateObject53||(_templateObject53=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: \",\";\\n  padding: \",\" \",\";\\n  font-size: \",\";\\n  font-family: monospace;\\n  width: 120px;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: \",\";\\n  }\\n\"])),theme.colors.card,theme.colors.border,theme.borderRadius.sm,theme.spacing.xs,theme.spacing.sm,theme.typography.fontSize.sm,theme.colors.primary);const SmallButton=styled.button(_templateObject54||(_templateObject54=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: white;\\n  border: none;\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  font-size: \",\";\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n\\n  &:hover {\\n    background: \",\";\\n  }\\n\"])),theme.colors.primary,theme.spacing.xs,theme.spacing.sm,theme.borderRadius.sm,theme.typography.fontSize.xs,theme.colors.primaryHover);const SmallIconButton=styled.button(_templateObject55||(_templateObject55=_taggedTemplateLiteral([\"\\n  background: transparent;\\n  border: none;\\n  color: \",\";\\n  cursor: pointer;\\n  padding: 2px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  \\n  &:hover {\\n    color: \",\";\\n  }\\n\"])),theme.colors.textSecondary,theme.colors.error);const TripTemplateManager=_ref=>{let{scheduleId,templates,onTemplatesChange,onError,vehicleBlockCodes,driverRunCodes,onBlockCodesChange,onRunCodesChange,readOnly=false}=_ref;const[showAddForm,setShowAddForm]=useState(false);const[formMode,setFormMode]=useState('single');const[error,setError]=useState(null);const[viewMode,setViewMode]=useState('table');// Get code strings for dropdowns\nconst allBlockCodes=useMemo(()=>{return vehicleBlockCodes.map(c=>c.code).sort();},[vehicleBlockCodes]);const allRunCodes=useMemo(()=>{return driverRunCodes.map(c=>c.code).sort();},[driverRunCodes]);const getDutyTypeIcon=dutyType=>{switch(dutyType){case'TRIP':return/*#__PURE__*/_jsx(FiTruck,{size:14});case'WASHING':return/*#__PURE__*/_jsx(FiDroplet,{size:14});case'MAINTENANCE':return/*#__PURE__*/_jsx(FiTruck,{size:14});default:return/*#__PURE__*/_jsx(FiClock,{size:14});}};const getDutyTypeLabel=dutyType=>{switch(dutyType){case'TRIP':return'Trip';case'WASHING':return'Washing';case'MAINTENANCE':return'Maintenance';default:return dutyType;}};const formatTime=timeString=>{try{const date=new Date(timeString);return date.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',hour12:false});}catch(_unused){return timeString;}};const calculateDuration=(startTime,endTime)=>{try{const start=new Date(startTime);const end=new Date(endTime);return(end.getTime()-start.getTime())/(1000*60*60);// hours\n}catch(_unused2){return 0;}};const calculateStartHour=timeString=>{try{const date=new Date(timeString);return date.getHours()+date.getMinutes()/60;}catch(_unused3){return 0;}};const checkForOverlaps=templates=>{const sortedTemplates=[...templates].sort((a,b)=>new Date(a.startTime).getTime()-new Date(b.startTime).getTime());for(let i=0;i<sortedTemplates.length-1;i++){const current=sortedTemplates[i];const next=sortedTemplates[i+1];const currentEnd=new Date(current.endTime).getTime();const nextStart=new Date(next.startTime).getTime();if(currentEnd>nextStart){return true;}}return false;};const handleDeleteTemplate=async templateId=>{if(!scheduleId){// For new schedules, just remove from local state\nconst updatedTemplates=templates.filter(t=>t.id!==templateId);onTemplatesChange(updatedTemplates);return;}try{await apiService.deleteDutyTemplate(scheduleId,templateId);const updatedTemplates=templates.filter(t=>t.id!==templateId);onTemplatesChange(updatedTemplates);}catch(error){console.error('Error deleting template:',error);setError('Failed to delete template');onError===null||onError===void 0?void 0:onError('Failed to delete template');}};const handleAddTemplate=async templateData=>{if(!scheduleId){// For new schedules, add to local state with temporary ID\nconst newTemplate=_objectSpread(_objectSpread({},templateData),{},{id:\"temp-\".concat(Date.now()),scheduleId:'temp',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});onTemplatesChange([...templates,newTemplate]);return;}try{const newTemplate=await apiService.createDutyTemplate(scheduleId,_objectSpread(_objectSpread({},templateData),{},{scheduleId}));onTemplatesChange([...templates,newTemplate]);}catch(error){console.error('Error creating template:',error);setError('Failed to create template');onError===null||onError===void 0?void 0:onError('Failed to create template');}};const handleBulkAddTemplates=async templatesData=>{if(!scheduleId){// For new schedules, add to local state with temporary IDs\nconst newTemplates=templatesData.map((templateData,index)=>_objectSpread(_objectSpread({},templateData),{},{id:\"temp-\".concat(Date.now(),\"-\").concat(index),scheduleId:'temp',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));onTemplatesChange([...templates,...newTemplates]);return;}try{// Create templates one by one for existing schedules\nconst newTemplates=[];for(const templateData of templatesData){const newTemplate=await apiService.createDutyTemplate(scheduleId,_objectSpread(_objectSpread({},templateData),{},{scheduleId}));newTemplates.push(newTemplate);}onTemplatesChange([...templates,...newTemplates]);}catch(error){console.error('Error creating bulk templates:',error);setError('Failed to create some templates');onError===null||onError===void 0?void 0:onError('Failed to create some templates');}};const hasOverlaps=checkForOverlaps(templates);// Get color for a code\nconst getBlockCodeColor=code=>{const codeColor=vehicleBlockCodes.find(c=>c.code===code);return(codeColor===null||codeColor===void 0?void 0:codeColor.color)||theme.colors.primary;};const getRunCodeColor=code=>{const codeColor=driverRunCodes.find(c=>c.code===code);return(codeColor===null||codeColor===void 0?void 0:codeColor.color)||'#8b5cf6';};const handleUpdateTemplate=async(templateId,updates)=>{const updatedTemplates=templates.map(t=>t.id===templateId?_objectSpread(_objectSpread({},t),updates):t);if(!scheduleId){onTemplatesChange(updatedTemplates);return;}try{const template=templates.find(t=>t.id===templateId);if(template){await apiService.updateDutyTemplate(scheduleId,templateId,_objectSpread(_objectSpread({},updates),{},{id:templateId,startTime:template.startTime,endTime:template.endTime,dutyType:template.dutyType,scheduleId:template.scheduleId}));}onTemplatesChange(updatedTemplates);}catch(error){console.error('Error updating template:',error);setError('Failed to update template');onError===null||onError===void 0?void 0:onError('Failed to update template');}};const handleAssignBlockCode=(templateId,code)=>{handleUpdateTemplate(templateId,{vehicleBlockCode:code===''?undefined:code});};const handleAssignRunCode=(templateId,code)=>{handleUpdateTemplate(templateId,{driverRunCode:code===''?undefined:code});};return/*#__PURE__*/_jsxs(TemplateManagerContainer,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(Title,{children:\"Duties\"}),!readOnly&&/*#__PURE__*/_jsxs(AddButton,{onClick:()=>{setShowAddForm(true);setFormMode('single');},children:[/*#__PURE__*/_jsx(FiPlus,{size:16}),\"Add\"]})]}),error&&/*#__PURE__*/_jsx(ErrorMessage,{children:error}),/*#__PURE__*/_jsxs(ViewToggle,{children:[/*#__PURE__*/_jsx(ToggleButton,{active:viewMode==='table',onClick:()=>setViewMode('table'),children:\"Table View\"}),/*#__PURE__*/_jsx(ToggleButton,{active:viewMode==='timeline',onClick:()=>setViewMode('timeline'),children:\"Timeline View\"})]}),viewMode==='timeline'&&templates.length>0&&/*#__PURE__*/_jsxs(TimelineContainer,{children:[/*#__PURE__*/_jsxs(TimelineHeader,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Timeline View\"}),/*#__PURE__*/_jsx(\"span\",{children:\"24 Hour Schedule\"})]}),/*#__PURE__*/_jsx(TimelineGrid,{children:Array.from({length:24},(_,i)=>/*#__PURE__*/_jsx(HourLabel,{children:i%2===0?\"\".concat(i,\":00\"):''},i))}),templates.map(template=>/*#__PURE__*/_jsxs(TemplateBlock,{startHour:calculateStartHour(template.startTime),duration:calculateDuration(template.startTime,template.endTime),dutyType:template.dutyType,isOverlapping:hasOverlaps,children:[/*#__PURE__*/_jsxs(TemplateInfo,{children:[getDutyTypeIcon(template.dutyType),/*#__PURE__*/_jsxs(\"span\",{children:[formatTime(template.startTime),\" - \",formatTime(template.endTime)]})]}),!readOnly&&/*#__PURE__*/_jsx(TemplateActions,{children:/*#__PURE__*/_jsx(ActionButton,{onClick:()=>handleDeleteTemplate(template.id),children:/*#__PURE__*/_jsx(FiTrash2,{size:10})})})]},template.id))]}),viewMode==='table'&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Section,{children:templates.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(FiClock,{size:48,color:theme.colors.textMuted,style:{marginBottom:theme.spacing.md}}),/*#__PURE__*/_jsx(\"h4\",{style:{color:theme.colors.textPrimary,marginBottom:theme.spacing.sm},children:\"No Duty Templates\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add duty templates to define when trips, washing, or maintenance should occur.\"})]}):/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(TableHeaderCell,{children:\"Time\"}),/*#__PURE__*/_jsx(TableHeaderCell,{children:\"Type\"}),/*#__PURE__*/_jsx(TableHeaderCell,{children:\"Vehicle Block\"}),/*#__PURE__*/_jsx(TableHeaderCell,{children:\"Driver Run\"}),!readOnly&&/*#__PURE__*/_jsx(TableHeaderCell,{style:{textAlign:'right'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:templates.map(template=>/*#__PURE__*/_jsxs(TemplateRow,{children:[/*#__PURE__*/_jsxs(TableCell,{children:[formatTime(template.startTime),\" - \",formatTime(template.endTime)]}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Badge,{color:template.dutyType==='TRIP'?theme.colors.primary:template.dutyType==='WASHING'?'#8b5cf6':'#f59e0b',children:[getDutyTypeIcon(template.dutyType),getDutyTypeLabel(template.dutyType)]})}),/*#__PURE__*/_jsx(TableCell,{$bgColor:template.vehicleBlockCode?getBlockCodeColor(template.vehicleBlockCode):undefined,children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:theme.spacing.sm,width:'100%'},children:/*#__PURE__*/_jsxs(Select,{value:template.vehicleBlockCode||'',onChange:e=>handleAssignBlockCode(template.id,e.target.value),disabled:readOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Unassigned\"}),allBlockCodes.map(blockCode=>/*#__PURE__*/_jsx(\"option\",{value:blockCode,children:blockCode},blockCode)),template.vehicleBlockCode&&!allBlockCodes.includes(template.vehicleBlockCode)&&/*#__PURE__*/_jsx(\"option\",{value:template.vehicleBlockCode,children:template.vehicleBlockCode})]})})}),/*#__PURE__*/_jsx(TableCell,{$bgColor:template.driverRunCode?getRunCodeColor(template.driverRunCode):undefined,children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:theme.spacing.sm,width:'100%'},children:/*#__PURE__*/_jsxs(Select,{value:template.driverRunCode||'',onChange:e=>handleAssignRunCode(template.id,e.target.value),disabled:readOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Unassigned\"}),allRunCodes.map(runCode=>/*#__PURE__*/_jsx(\"option\",{value:runCode,children:runCode},runCode)),template.driverRunCode&&!allRunCodes.includes(template.driverRunCode)&&/*#__PURE__*/_jsx(\"option\",{value:template.driverRunCode,children:template.driverRunCode})]})})}),!readOnly&&/*#__PURE__*/_jsx(ActionCell,{children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDeleteTemplate(template.id),children:/*#__PURE__*/_jsx(FiTrash2,{size:16})})})]},template.id))})]})})}),showAddForm&&/*#__PURE__*/_jsx(ModalOverlay,{onClick:()=>setShowAddForm(false),children:/*#__PURE__*/_jsxs(ModalContent,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(ModalHeader,{children:[/*#__PURE__*/_jsx(ModalTitle,{children:\"Add Duty\"}),/*#__PURE__*/_jsx(CloseButton,{onClick:()=>setShowAddForm(false),children:/*#__PURE__*/_jsx(FiX,{size:20})})]}),/*#__PURE__*/_jsxs(TabContainer,{children:[/*#__PURE__*/_jsx(Tab,{active:formMode==='single',onClick:()=>setFormMode('single'),children:\"Single\"}),/*#__PURE__*/_jsx(Tab,{active:formMode==='bulk',onClick:()=>setFormMode('bulk'),children:\"Bulk\"})]}),formMode==='single'?/*#__PURE__*/_jsx(AddTemplateForm,{embedded:true,onClose:()=>setShowAddForm(false),onSave:template=>{handleAddTemplate(template);setShowAddForm(false);},existingTemplates:templates}):/*#__PURE__*/_jsx(BulkTemplateForm,{embedded:true,onClose:()=>setShowAddForm(false),onSave:templates=>{handleBulkAddTemplates(templates);setShowAddForm(false);},existingTemplates:templates})]})})]});};export default TripTemplateManager;","map":{"version":3,"names":["React","useState","useMemo","FiPlus","FiTrash2","FiClock","FiTruck","FiDroplet","FiX","styled","theme","apiService","AddTemplateForm","BulkTemplateForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TemplateManagerContainer","div","_templateObject","_taggedTemplateLiteral","colors","card","border","borderRadius","lg","spacing","Header","_templateObject2","Title","h3","_templateObject3","textPrimary","typography","fontSize","fontWeight","semibold","ButtonGroup","_templateObject4","sm","AddButton","button","_templateObject5","primary","md","medium","primaryHover","TabContainer","_templateObject6","Tab","_templateObject7","props","active","textSecondary","surfaceHover","ModalOverlay","_templateObject8","zIndex","modal","ModalContent","_templateObject9","xl","ModalHeader","_templateObject0","ModalTitle","_templateObject1","CloseButton","_templateObject10","TimelineContainer","_templateObject11","surface","TimelineHeader","_templateObject12","TimelineGrid","_templateObject13","HourLabel","_templateObject14","textMuted","TemplateBlock","_templateObject15","startHour","duration","isOverlapping","error","dutyType","xs","shadows","TemplateInfo","_templateObject16","TemplateActions","_templateObject17","ActionButton","_templateObject18","TemplatesList","_templateObject19","TemplateItem","_templateObject20","TemplateTime","_templateObject21","DeleteButton","_templateObject22","EmptyState","_templateObject23","ErrorMessage","_templateObject24","ViewToggle","_templateObject25","ToggleButton","_templateObject26","Section","_templateObject27","SectionHeader","_templateObject28","SectionTitle","h4","_templateObject29","base","Table","table","_templateObject30","TableHeader","thead","_templateObject31","TableHeaderCell","th","_templateObject32","TableBody","tbody","_templateObject33","TableRow","tr","_templateObject34","expanded","TableCell","td","_templateObject35","$bgColor","concat","CodeGroupRow","_templateObject36","ExpandIcon","_templateObject37","CodeCell","_templateObject38","EditableCode","_templateObject39","CodeInput","input","_templateObject40","CodeDisplay","span","_templateObject41","EditButton","_templateObject42","SaveButton","_templateObject43","TemplateRow","_templateObject44","NestedTemplateCell","_templateObject45","Select","select","_templateObject46","ActionCell","_templateObject47","IconButton","_templateObject48","Badge","_templateObject49","color","EmptyCodeGroup","_templateObject50","CodeList","_templateObject51","CodeItem","_templateObject52","CodeInputSmall","_templateObject53","SmallButton","_templateObject54","SmallIconButton","_templateObject55","TripTemplateManager","_ref","scheduleId","templates","onTemplatesChange","onError","vehicleBlockCodes","driverRunCodes","onBlockCodesChange","onRunCodesChange","readOnly","showAddForm","setShowAddForm","formMode","setFormMode","setError","viewMode","setViewMode","allBlockCodes","map","c","code","sort","allRunCodes","getDutyTypeIcon","size","getDutyTypeLabel","formatTime","timeString","date","Date","toLocaleTimeString","hour","minute","hour12","_unused","calculateDuration","startTime","endTime","start","end","getTime","_unused2","calculateStartHour","getHours","getMinutes","_unused3","checkForOverlaps","sortedTemplates","a","b","i","length","current","next","currentEnd","nextStart","handleDeleteTemplate","templateId","updatedTemplates","filter","t","id","deleteDutyTemplate","console","handleAddTemplate","templateData","newTemplate","_objectSpread","now","createdAt","toISOString","updatedAt","createDutyTemplate","handleBulkAddTemplates","templatesData","newTemplates","index","push","hasOverlaps","getBlockCodeColor","codeColor","find","getRunCodeColor","handleUpdateTemplate","updates","template","updateDutyTemplate","handleAssignBlockCode","vehicleBlockCode","undefined","handleAssignRunCode","driverRunCode","children","onClick","Array","from","_","style","marginBottom","textAlign","display","alignItems","gap","width","value","onChange","e","target","disabled","blockCode","includes","runCode","stopPropagation","embedded","onClose","onSave","existingTemplates"],"sources":["/home/mhmdal/Projects/moveo-master/moveo/src/components/Forms/TripTemplateManager.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { FiPlus, FiTrash2, FiClock, FiTruck, FiDroplet, FiX, FiEdit2, FiCheck, FiChevronDown, FiChevronUp } from 'react-icons/fi';\nimport styled from 'styled-components';\nimport { theme } from '../../styles/theme';\nimport { DutyTemplate } from '../../types';\nimport { apiService } from '../../services/apiService';\nimport AddTemplateForm from './AddTemplateForm';\nimport BulkTemplateForm from './BulkTemplateForm';\n\nconst TemplateManagerContainer = styled.div`\n  background: ${theme.colors.card};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.lg};\n  padding: ${theme.spacing.lg};\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${theme.spacing.lg};\n`;\n\nconst Title = styled.h3`\n  color: ${theme.colors.textPrimary};\n  margin: 0;\n  font-size: ${theme.typography.fontSize.lg};\n  font-weight: ${theme.typography.fontWeight.semibold};\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: ${theme.spacing.sm};\n`;\n\nconst AddButton = styled.button`\n  background: ${theme.colors.primary};\n  color: white;\n  border: none;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${theme.colors.primaryHover};\n  }\n`;\n\nconst TabContainer = styled.div`\n  display: flex;\n  border-bottom: 1px solid ${theme.colors.border};\n  margin-bottom: ${theme.spacing.lg};\n`;\n\nconst Tab = styled.button<{ active: boolean }>`\n  flex: 1;\n  background: transparent;\n  border: none;\n  border-bottom: 2px solid ${props => props.active ? theme.colors.primary : 'transparent'};\n  color: ${props => props.active ? theme.colors.primary : theme.colors.textSecondary};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${props => props.active ? theme.typography.fontWeight.semibold : theme.typography.fontWeight.medium};\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: ${theme.colors.primary};\n    background: ${theme.colors.surfaceHover};\n  }\n`;\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: ${theme.zIndex.modal};\n`;\n\nconst ModalContent = styled.div`\n  background: ${theme.colors.card};\n  border-radius: ${theme.borderRadius.lg};\n  padding: ${theme.spacing.xl};\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  overflow-y: auto;\n`;\n\nconst ModalHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${theme.spacing.lg};\n`;\n\nconst ModalTitle = styled.h3`\n  color: ${theme.colors.textPrimary};\n  margin: 0;\n  font-size: ${theme.typography.fontSize.lg};\n  font-weight: ${theme.typography.fontWeight.semibold};\n`;\n\nconst CloseButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${theme.colors.textSecondary};\n  cursor: pointer;\n  padding: ${theme.spacing.sm};\n  border-radius: ${theme.borderRadius.md};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    color: ${theme.colors.textPrimary};\n  }\n`;\n\nconst TimelineContainer = styled.div`\n  position: relative;\n  min-height: 200px;\n  background: ${theme.colors.surface};\n  border-radius: ${theme.borderRadius.md};\n  padding: ${theme.spacing.md};\n  margin-bottom: ${theme.spacing.lg};\n`;\n\nconst TimelineHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${theme.spacing.md};\n  font-size: ${theme.typography.fontSize.sm};\n  color: ${theme.colors.textSecondary};\n`;\n\nconst TimelineGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(24, 1fr);\n  gap: 1px;\n  height: 120px;\n  background: ${theme.colors.border};\n  border-radius: ${theme.borderRadius.sm};\n  overflow: hidden;\n`;\n\nconst HourLabel = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  color: ${theme.colors.textMuted};\n  background: ${theme.colors.surface};\n`;\n\nconst TemplateBlock = styled.div<{ \n  startHour: number; \n  duration: number; \n  dutyType: string;\n  isOverlapping?: boolean;\n}>`\n  position: absolute;\n  top: 40px;\n  left: ${props => (props.startHour / 24) * 100}%;\n  width: ${props => (props.duration / 24) * 100}%;\n  height: 40px;\n  background: ${props => {\n    if (props.isOverlapping) return theme.colors.error;\n    switch (props.dutyType) {\n      case 'TRIP': return theme.colors.primary;\n      case 'WASHING': return '#8b5cf6';\n      case 'MAINTENANCE': return '#f59e0b';\n      default: return theme.colors.textMuted;\n    }\n  }};\n  border-radius: ${theme.borderRadius.sm};\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 ${theme.spacing.sm};\n  color: white;\n  font-size: ${theme.typography.fontSize.xs};\n  font-weight: ${theme.typography.fontWeight.medium};\n  cursor: pointer;\n  transition: all 0.2s ease;\n  z-index: 2;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: ${theme.shadows.md};\n  }\n`;\n\nconst TemplateInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.xs};\n  flex: 1;\n  min-width: 0;\n`;\n\nconst TemplateActions = styled.div`\n  display: flex;\n  gap: ${theme.spacing.xs};\n  opacity: 0;\n  transition: opacity 0.2s ease;\n\n  ${TemplateBlock}:hover & {\n    opacity: 1;\n  }\n`;\n\nconst ActionButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  padding: 2px;\n  border-radius: 2px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst TemplatesList = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: ${theme.spacing.xs};\n`;\n\nconst TemplateItem = styled.div<{ dutyType: string }>`\n  position: relative;\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  background: ${theme.colors.surface};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.sm};\n  border-left: 3px solid ${props => {\n    switch (props.dutyType) {\n      case 'TRIP': return theme.colors.primary;\n      case 'WASHING': return '#8b5cf6';\n      case 'MAINTENANCE': return '#f59e0b';\n      default: return theme.colors.textMuted;\n    }\n  }};\n  font-size: ${theme.typography.fontSize.xs};\n  cursor: pointer;\n  transition: all 0.15s ease;\n\n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    border-color: ${props => {\n      switch (props.dutyType) {\n        case 'TRIP': return theme.colors.primary;\n        case 'WASHING': return '#8b5cf6';\n        case 'MAINTENANCE': return '#f59e0b';\n        default: return theme.colors.textMuted;\n      }\n    }};\n  }\n\n  &:hover .delete-btn {\n    opacity: 1;\n  }\n`;\n\nconst TemplateTime = styled.div`\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.xs};\n  font-weight: ${theme.typography.fontWeight.medium};\n  font-family: monospace;\n  line-height: 1.4;\n`;\n\nconst DeleteButton = styled.button`\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  background: ${theme.colors.error};\n  color: white;\n  border: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  font-size: 10px;\n  padding: 0;\n\n  &:hover {\n    background: ${theme.colors.error};\n    opacity: 1 !important;\n    transform: scale(1.1);\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: ${theme.spacing['2xl']};\n  color: ${theme.colors.textMuted};\n`;\n\nconst ErrorMessage = styled.div`\n  background: ${theme.colors.error}20;\n  border: 1px solid ${theme.colors.error};\n  color: ${theme.colors.error};\n  padding: ${theme.spacing.sm};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  margin-bottom: ${theme.spacing.md};\n`;\n\nconst ViewToggle = styled.div`\n  display: flex;\n  gap: ${theme.spacing.xs};\n  margin-bottom: ${theme.spacing.md};\n`;\n\nconst ToggleButton = styled.button<{ active: boolean }>`\n  background: ${props => props.active ? theme.colors.primary : theme.colors.surface};\n  color: ${props => props.active ? 'white' : theme.colors.textSecondary};\n  border: 1px solid ${props => props.active ? theme.colors.primary : theme.colors.border};\n  padding: ${theme.spacing.xs} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.active ? theme.colors.primaryHover : theme.colors.surfaceHover};\n  }\n`;\n\nconst Section = styled.div`\n  margin-bottom: ${theme.spacing.xl};\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${theme.spacing.md};\n  padding-bottom: ${theme.spacing.sm};\n  border-bottom: 2px solid ${theme.colors.border};\n`;\n\nconst SectionTitle = styled.h4`\n  color: ${theme.colors.textPrimary};\n  margin: 0;\n  font-size: ${theme.typography.fontSize.base};\n  font-weight: ${theme.typography.fontWeight.semibold};\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  background: ${theme.colors.card};\n  border-radius: ${theme.borderRadius.md};\n  overflow: hidden;\n  margin: ${theme.spacing.sm} 0;\n`;\n\nconst TableHeader = styled.thead`\n  background: ${theme.colors.surface};\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  text-align: left;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.semibold};\n  color: ${theme.colors.textSecondary};\n  border-bottom: 2px solid ${theme.colors.border};\n`;\n\nconst TableBody = styled.tbody`\n  & > tr:not(:last-child) {\n    border-bottom: 1px solid ${theme.colors.border};\n  }\n`;\n\nconst TableRow = styled.tr<{ expanded?: boolean }>`\n  background: ${props => props.expanded ? theme.colors.surfaceHover : theme.colors.card};\n  transition: background 0.2s ease;\n\n  &:hover {\n    background: ${theme.colors.surfaceHover};\n  }\n`;\n\nconst TableCell = styled.td<{ $bgColor?: string }>`\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  font-size: ${theme.typography.fontSize.sm};\n  color: ${theme.colors.textPrimary};\n  vertical-align: middle;\n  background: ${props => props.$bgColor ? `color-mix(in srgb, ${props.$bgColor} 15%, transparent)` : 'transparent'};\n  border-left: ${props => props.$bgColor ? `3px solid ${props.$bgColor}` : 'none'};\n  transition: all 0.2s ease;\n  \n  ${props => props.$bgColor && `\n    &:hover {\n      background: color-mix(in srgb, ${props.$bgColor} 25%, transparent);\n    }\n  `}\n`;\n\nconst CodeGroupRow = styled(TableRow)`\n  cursor: pointer;\n  font-weight: ${theme.typography.fontWeight.medium};\n  background: ${theme.colors.surface};\n`;\n\nconst ExpandIcon = styled.div`\n  display: inline-flex;\n  align-items: center;\n  margin-right: ${theme.spacing.xs};\n`;\n\nconst CodeCell = styled(TableCell)`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.xs};\n`;\n\nconst EditableCode = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.xs};\n  flex: 1;\n`;\n\nconst CodeInput = styled.input`\n  background: ${theme.colors.card};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.sm};\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  font-size: ${theme.typography.fontSize.sm};\n  font-family: monospace;\n  color: ${theme.colors.textPrimary};\n  min-width: 100px;\n  \n  &:focus {\n    outline: none;\n    border-color: ${theme.colors.primary};\n  }\n`;\n\nconst CodeDisplay = styled.span`\n  font-family: monospace;\n  color: ${theme.colors.textPrimary};\n  font-weight: ${theme.typography.fontWeight.medium};\n`;\n\nconst EditButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${theme.colors.textSecondary};\n  cursor: pointer;\n  padding: ${theme.spacing.xs};\n  border-radius: ${theme.borderRadius.sm};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n\n  ${CodeCell}:hover & {\n    opacity: 1;\n  }\n\n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    color: ${theme.colors.primary};\n  }\n`;\n\nconst SaveButton = styled.button`\n  background: ${theme.colors.primary};\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: ${theme.spacing.xs};\n  border-radius: ${theme.borderRadius.sm};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: ${theme.colors.primaryHover};\n  }\n`;\n\nconst TemplateRow = styled(TableRow)`\n  background: ${theme.colors.card};\n  \n  &:hover {\n    background: ${theme.colors.surfaceHover};\n  }\n`;\n\nconst NestedTemplateCell = styled(TableCell)`\n  padding-left: ${theme.spacing.xl};\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\n\nconst Select = styled.select`\n  background: ${theme.colors.card};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.sm};\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  font-size: ${theme.typography.fontSize.sm};\n  color: ${theme.colors.textPrimary};\n  cursor: pointer;\n  min-width: 120px;\n\n  &:focus {\n    outline: none;\n    border-color: ${theme.colors.primary};\n  }\n`;\n\nconst ActionCell = styled(TableCell)`\n  text-align: right;\n  width: 80px;\n`;\n\nconst IconButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${theme.colors.textSecondary};\n  cursor: pointer;\n  padding: ${theme.spacing.xs};\n  border-radius: ${theme.borderRadius.sm};\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    color: ${theme.colors.error};\n  }\n`;\n\nconst Badge = styled.span<{ color: string }>`\n  display: inline-flex;\n  align-items: center;\n  gap: ${theme.spacing.xs};\n  padding: 2px ${theme.spacing.xs};\n  border-radius: ${theme.borderRadius.sm};\n  font-size: ${theme.typography.fontSize.xs};\n  font-weight: ${theme.typography.fontWeight.medium};\n  background: ${props => props.color}20;\n  color: ${props => props.color};\n  border: 1px solid ${props => props.color}40;\n`;\n\nconst EmptyCodeGroup = styled.div`\n  padding: ${theme.spacing.md};\n  text-align: center;\n  color: ${theme.colors.textMuted};\n  font-size: ${theme.typography.fontSize.sm};\n`;\n\nconst CodeList = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: ${theme.spacing.xs};\n  margin-top: ${theme.spacing.sm};\n`;\n\nconst CodeItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.xs};\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  background: ${theme.colors.surface};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.sm};\n  font-family: monospace;\n  font-size: ${theme.typography.fontSize.sm};\n`;\n\nconst CodeInputSmall = styled.input`\n  background: ${theme.colors.card};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.sm};\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  font-size: ${theme.typography.fontSize.sm};\n  font-family: monospace;\n  width: 120px;\n  \n  &:focus {\n    outline: none;\n    border-color: ${theme.colors.primary};\n  }\n`;\n\nconst SmallButton = styled.button`\n  background: ${theme.colors.primary};\n  color: white;\n  border: none;\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  border-radius: ${theme.borderRadius.sm};\n  font-size: ${theme.typography.fontSize.xs};\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${theme.colors.primaryHover};\n  }\n`;\n\nconst SmallIconButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${theme.colors.textSecondary};\n  cursor: pointer;\n  padding: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    color: ${theme.colors.error};\n  }\n`;\n\nexport interface CodeColor {\n  code: string;\n  color: string;\n}\n\ninterface TripTemplateManagerProps {\n  scheduleId?: string;\n  templates: DutyTemplate[];\n  onTemplatesChange: (templates: DutyTemplate[]) => void;\n  onError?: (error: string) => void;\n  vehicleBlockCodes: CodeColor[];\n  driverRunCodes: CodeColor[];\n  onBlockCodesChange?: (codes: CodeColor[]) => void;\n  onRunCodesChange?: (codes: CodeColor[]) => void;\n  readOnly?: boolean;\n}\n\nconst TripTemplateManager: React.FC<TripTemplateManagerProps> = ({\n  scheduleId,\n  templates,\n  onTemplatesChange,\n  onError,\n  vehicleBlockCodes,\n  driverRunCodes,\n  onBlockCodesChange,\n  onRunCodesChange,\n  readOnly = false\n}) => {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [formMode, setFormMode] = useState<'single' | 'bulk'>('single');\n  const [error, setError] = useState<string | null>(null);\n  const [viewMode, setViewMode] = useState<'table' | 'timeline'>('table');\n\n  // Get code strings for dropdowns\n  const allBlockCodes = useMemo(() => {\n    return vehicleBlockCodes.map(c => c.code).sort();\n  }, [vehicleBlockCodes]);\n\n  const allRunCodes = useMemo(() => {\n    return driverRunCodes.map(c => c.code).sort();\n  }, [driverRunCodes]);\n\n  const getDutyTypeIcon = (dutyType: string) => {\n    switch (dutyType) {\n      case 'TRIP': return <FiTruck size={14} />;\n      case 'WASHING': return <FiDroplet size={14} />;\n      case 'MAINTENANCE': return <FiTruck size={14} />;\n      default: return <FiClock size={14} />;\n    }\n  };\n\n  const getDutyTypeLabel = (dutyType: string) => {\n    switch (dutyType) {\n      case 'TRIP': return 'Trip';\n      case 'WASHING': return 'Washing';\n      case 'MAINTENANCE': return 'Maintenance';\n      default: return dutyType;\n    }\n  };\n\n  const formatTime = (timeString: string) => {\n    try {\n      const date = new Date(timeString);\n      return date.toLocaleTimeString('en-US', { \n        hour: '2-digit', \n        minute: '2-digit',\n        hour12: false \n      });\n    } catch {\n      return timeString;\n    }\n  };\n\n  const calculateDuration = (startTime: string, endTime: string) => {\n    try {\n      const start = new Date(startTime);\n      const end = new Date(endTime);\n      return (end.getTime() - start.getTime()) / (1000 * 60 * 60); // hours\n    } catch {\n      return 0;\n    }\n  };\n\n  const calculateStartHour = (timeString: string) => {\n    try {\n      const date = new Date(timeString);\n      return date.getHours() + (date.getMinutes() / 60);\n    } catch {\n      return 0;\n    }\n  };\n\n  const checkForOverlaps = (templates: DutyTemplate[]) => {\n    const sortedTemplates = [...templates].sort((a, b) => \n      new Date(a.startTime).getTime() - new Date(b.startTime).getTime()\n    );\n\n    for (let i = 0; i < sortedTemplates.length - 1; i++) {\n      const current = sortedTemplates[i];\n      const next = sortedTemplates[i + 1];\n      \n      const currentEnd = new Date(current.endTime).getTime();\n      const nextStart = new Date(next.startTime).getTime();\n      \n      if (currentEnd > nextStart) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  const handleDeleteTemplate = async (templateId: string) => {\n    if (!scheduleId) {\n      // For new schedules, just remove from local state\n      const updatedTemplates = templates.filter(t => t.id !== templateId);\n      onTemplatesChange(updatedTemplates);\n      return;\n    }\n\n    try {\n      await apiService.deleteDutyTemplate(scheduleId, templateId);\n      const updatedTemplates = templates.filter(t => t.id !== templateId);\n      onTemplatesChange(updatedTemplates);\n    } catch (error) {\n      console.error('Error deleting template:', error);\n      setError('Failed to delete template');\n      onError?.('Failed to delete template');\n    }\n  };\n\n  const handleAddTemplate = async (templateData: Omit<DutyTemplate, 'id' | 'scheduleId' | 'createdAt' | 'updatedAt'>) => {\n    if (!scheduleId) {\n      // For new schedules, add to local state with temporary ID\n      const newTemplate: DutyTemplate = {\n        ...templateData,\n        id: `temp-${Date.now()}`,\n        scheduleId: 'temp',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      };\n      onTemplatesChange([...templates, newTemplate]);\n      return;\n    }\n\n    try {\n      const newTemplate = await apiService.createDutyTemplate(scheduleId, {\n        ...templateData,\n        scheduleId\n      });\n      onTemplatesChange([...templates, newTemplate]);\n    } catch (error) {\n      console.error('Error creating template:', error);\n      setError('Failed to create template');\n      onError?.('Failed to create template');\n    }\n  };\n\n  const handleBulkAddTemplates = async (templatesData: Omit<DutyTemplate, 'id' | 'scheduleId' | 'createdAt' | 'updatedAt'>[]) => {\n    if (!scheduleId) {\n      // For new schedules, add to local state with temporary IDs\n      const newTemplates: DutyTemplate[] = templatesData.map((templateData, index) => ({\n        ...templateData,\n        id: `temp-${Date.now()}-${index}`,\n        scheduleId: 'temp',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      }));\n      onTemplatesChange([...templates, ...newTemplates]);\n      return;\n    }\n\n    try {\n      // Create templates one by one for existing schedules\n      const newTemplates: DutyTemplate[] = [];\n      for (const templateData of templatesData) {\n        const newTemplate = await apiService.createDutyTemplate(scheduleId, {\n          ...templateData,\n          scheduleId\n        });\n        newTemplates.push(newTemplate);\n      }\n      onTemplatesChange([...templates, ...newTemplates]);\n    } catch (error) {\n      console.error('Error creating bulk templates:', error);\n      setError('Failed to create some templates');\n      onError?.('Failed to create some templates');\n    }\n  };\n\n  const hasOverlaps = checkForOverlaps(templates);\n\n  // Get color for a code\n  const getBlockCodeColor = (code: string) => {\n    const codeColor = vehicleBlockCodes.find(c => c.code === code);\n    return codeColor?.color || theme.colors.primary;\n  };\n\n  const getRunCodeColor = (code: string) => {\n    const codeColor = driverRunCodes.find(c => c.code === code);\n    return codeColor?.color || '#8b5cf6';\n  };\n\n  const handleUpdateTemplate = async (templateId: string, updates: Partial<DutyTemplate>) => {\n    const updatedTemplates = templates.map(t => \n      t.id === templateId ? { ...t, ...updates } : t\n    );\n\n    if (!scheduleId) {\n      onTemplatesChange(updatedTemplates);\n      return;\n    }\n\n    try {\n      const template = templates.find(t => t.id === templateId);\n      if (template) {\n        await apiService.updateDutyTemplate(scheduleId, templateId, {\n          ...updates,\n          id: templateId,\n          startTime: template.startTime,\n          endTime: template.endTime,\n          dutyType: template.dutyType,\n          scheduleId: template.scheduleId\n        });\n      }\n      onTemplatesChange(updatedTemplates);\n    } catch (error) {\n      console.error('Error updating template:', error);\n      setError('Failed to update template');\n      onError?.('Failed to update template');\n    }\n  };\n\n  const handleAssignBlockCode = (templateId: string, code: string) => {\n    handleUpdateTemplate(templateId, { vehicleBlockCode: code === '' ? undefined : code });\n  };\n\n  const handleAssignRunCode = (templateId: string, code: string) => {\n    handleUpdateTemplate(templateId, { driverRunCode: code === '' ? undefined : code });\n  };\n\n  return (\n    <TemplateManagerContainer>\n      <Header>\n        <Title>Duties</Title>\n        {!readOnly && (\n          <AddButton onClick={() => {\n            setShowAddForm(true);\n            setFormMode('single');\n          }}>\n            <FiPlus size={16} />\n            Add\n          </AddButton>\n        )}\n      </Header>\n\n      {error && (\n        <ErrorMessage>\n          {error}\n        </ErrorMessage>\n      )}\n\n      <ViewToggle>\n        <ToggleButton active={viewMode === 'table'} onClick={() => setViewMode('table')}>\n          Table View\n        </ToggleButton>\n        <ToggleButton active={viewMode === 'timeline'} onClick={() => setViewMode('timeline')}>\n          Timeline View\n        </ToggleButton>\n      </ViewToggle>\n\n      {viewMode === 'timeline' && templates.length > 0 && (\n        <TimelineContainer>\n          <TimelineHeader>\n            <span>Timeline View</span>\n            <span>24 Hour Schedule</span>\n          </TimelineHeader>\n          \n          <TimelineGrid>\n            {Array.from({ length: 24 }, (_, i) => (\n              <HourLabel key={i}>\n                {i % 2 === 0 ? `${i}:00` : ''}\n              </HourLabel>\n            ))}\n          </TimelineGrid>\n\n          {templates.map((template) => (\n            <TemplateBlock\n              key={template.id}\n              startHour={calculateStartHour(template.startTime)}\n              duration={calculateDuration(template.startTime, template.endTime)}\n              dutyType={template.dutyType}\n              isOverlapping={hasOverlaps}\n            >\n              <TemplateInfo>\n                {getDutyTypeIcon(template.dutyType)}\n                <span>{formatTime(template.startTime)} - {formatTime(template.endTime)}</span>\n              </TemplateInfo>\n              {!readOnly && (\n                <TemplateActions>\n                  <ActionButton onClick={() => handleDeleteTemplate(template.id)}>\n                    <FiTrash2 size={10} />\n                  </ActionButton>\n                </TemplateActions>\n              )}\n            </TemplateBlock>\n          ))}\n        </TimelineContainer>\n      )}\n\n      {viewMode === 'table' && (\n        <>\n          {/* Duties Table */}\n          <Section>\n            {templates.length === 0 ? (\n              <EmptyState>\n                <FiClock size={48} color={theme.colors.textMuted} style={{ marginBottom: theme.spacing.md }} />\n                <h4 style={{ color: theme.colors.textPrimary, marginBottom: theme.spacing.sm }}>\n                  No Duty Templates\n                </h4>\n                <p>Add duty templates to define when trips, washing, or maintenance should occur.</p>\n              </EmptyState>\n            ) : (\n              <Table>\n                <TableHeader>\n                  <tr>\n                    <TableHeaderCell>Time</TableHeaderCell>\n                    <TableHeaderCell>Type</TableHeaderCell>\n                    <TableHeaderCell>Vehicle Block</TableHeaderCell>\n                    <TableHeaderCell>Driver Run</TableHeaderCell>\n                    {!readOnly && <TableHeaderCell style={{ textAlign: 'right' }}>Actions</TableHeaderCell>}\n                  </tr>\n                </TableHeader>\n                <TableBody>\n                  {templates.map((template) => (\n                    <TemplateRow key={template.id}>\n                      <TableCell>\n                        {formatTime(template.startTime)} - {formatTime(template.endTime)}\n                      </TableCell>\n                      <TableCell>\n                        <Badge color={\n                          template.dutyType === 'TRIP' ? theme.colors.primary :\n                          template.dutyType === 'WASHING' ? '#8b5cf6' : '#f59e0b'\n                        }>\n                          {getDutyTypeIcon(template.dutyType)}\n                          {getDutyTypeLabel(template.dutyType)}\n                        </Badge>\n                      </TableCell>\n                      <TableCell $bgColor={template.vehicleBlockCode ? getBlockCodeColor(template.vehicleBlockCode) : undefined}>\n                        <div style={{ display: 'flex', alignItems: 'center', gap: theme.spacing.sm, width: '100%' }}>\n                          <Select\n                            value={template.vehicleBlockCode || ''}\n                            onChange={(e) => handleAssignBlockCode(template.id, e.target.value)}\n                            disabled={readOnly}\n                          >\n                            <option value=\"\">Unassigned</option>\n                            {allBlockCodes.map(blockCode => (\n                              <option key={blockCode} value={blockCode}>{blockCode}</option>\n                            ))}\n                            {template.vehicleBlockCode && !allBlockCodes.includes(template.vehicleBlockCode) && (\n                              <option value={template.vehicleBlockCode}>{template.vehicleBlockCode}</option>\n                            )}\n                          </Select>\n                        </div>\n                      </TableCell>\n                      <TableCell $bgColor={template.driverRunCode ? getRunCodeColor(template.driverRunCode) : undefined}>\n                        <div style={{ display: 'flex', alignItems: 'center', gap: theme.spacing.sm, width: '100%' }}>\n                          <Select\n                            value={template.driverRunCode || ''}\n                            onChange={(e) => handleAssignRunCode(template.id, e.target.value)}\n                            disabled={readOnly}\n                          >\n                            <option value=\"\">Unassigned</option>\n                            {allRunCodes.map(runCode => (\n                              <option key={runCode} value={runCode}>{runCode}</option>\n                            ))}\n                            {template.driverRunCode && !allRunCodes.includes(template.driverRunCode) && (\n                              <option value={template.driverRunCode}>{template.driverRunCode}</option>\n                            )}\n                          </Select>\n                        </div>\n                      </TableCell>\n                      {!readOnly && (\n                        <ActionCell>\n                          <IconButton onClick={() => handleDeleteTemplate(template.id)}>\n                            <FiTrash2 size={16} />\n                          </IconButton>\n                        </ActionCell>\n                      )}\n                    </TemplateRow>\n                  ))}\n                </TableBody>\n              </Table>\n            )}\n          </Section>\n        </>\n      )}\n\n      {/* Add Form Modal with Tabs */}\n      {showAddForm && (\n        <ModalOverlay onClick={() => setShowAddForm(false)}>\n          <ModalContent onClick={(e) => e.stopPropagation()}>\n            <ModalHeader>\n              <ModalTitle>Add Duty</ModalTitle>\n              <CloseButton onClick={() => setShowAddForm(false)}>\n                <FiX size={20} />\n              </CloseButton>\n            </ModalHeader>\n\n            <TabContainer>\n              <Tab active={formMode === 'single'} onClick={() => setFormMode('single')}>\n                Single\n              </Tab>\n              <Tab active={formMode === 'bulk'} onClick={() => setFormMode('bulk')}>\n                Bulk\n              </Tab>\n            </TabContainer>\n\n            {formMode === 'single' ? (\n              <AddTemplateForm\n                embedded={true}\n                onClose={() => setShowAddForm(false)}\n                onSave={(template) => {\n                  handleAddTemplate(template);\n                  setShowAddForm(false);\n                }}\n                existingTemplates={templates}\n              />\n            ) : (\n              <BulkTemplateForm\n                embedded={true}\n                onClose={() => setShowAddForm(false)}\n                onSave={(templates) => {\n                  handleBulkAddTemplates(templates);\n                  setShowAddForm(false);\n                }}\n                existingTemplates={templates}\n              />\n            )}\n          </ModalContent>\n        </ModalOverlay>\n      )}\n    </TemplateManagerContainer>\n  );\n};\n\nexport default TripTemplateManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}