{"ast":null,"code":"import _objectSpread from\"/home/mhmdal/Projects/moveo-master/moveo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{FiSave,FiArrowLeft}from'react-icons/fi';import{Button}from'../../styles/GlobalStyles';import{PageContainer,PageHeader,PageTitle,HeaderActions,BackButton,FormCard,FormGrid,FormGroup,Label,Input,ErrorMessage}from'../../components/Common/CommonStyles';import{dataService}from'../../services/dataService';import VehicleModelSearchDropdown from'../../components/UI/DropDowns/VehicleModelSearchDropdown';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateVehicle=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({plateNo:'',fleetNo:'',vehicleModel:null});const[errors,setErrors]=useState([]);const[isSubmitting,setIsSubmitting]=useState(false);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear errors when user starts typing\nif(errors.length>0){setErrors([]);}};const handleVehicleModelChange=model=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{vehicleModel:model}));// Clear errors when user selects a model\nif(errors.length>0){setErrors([]);}};const validateForm=()=>{const newErrors=[];if(!formData.plateNo.trim()){newErrors.push('Plate number is required');}if(!formData.fleetNo.trim()){newErrors.push('Fleet number is required');}if(!formData.vehicleModel){newErrors.push('Vehicle model is required');}setErrors(newErrors);return newErrors.length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setIsSubmitting(true);try{var _formData$vehicleMode;const vehicleData={plateNo:formData.plateNo,fleetNo:formData.fleetNo,vehicleModelId:((_formData$vehicleMode=formData.vehicleModel)===null||_formData$vehicleMode===void 0?void 0:_formData$vehicleMode.id)||0};await dataService.createVehicle(vehicleData);navigate('/vehicles');}catch(error){console.error('Error creating vehicle:',error);alert('Failed to create vehicle. Please try again.');}finally{setIsSubmitting(false);}};const handleCancel=()=>{navigate('/vehicles');};return/*#__PURE__*/_jsxs(PageContainer,{className:\"fade-in\",children:[/*#__PURE__*/_jsxs(PageHeader,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(BackButton,{onClick:handleCancel,children:/*#__PURE__*/_jsx(FiArrowLeft,{size:18})}),/*#__PURE__*/_jsx(PageTitle,{children:\"Create New Vehicle\"})]}),/*#__PURE__*/_jsxs(HeaderActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCancel,disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:handleSubmit,disabled:isSubmitting,children:[/*#__PURE__*/_jsx(FiSave,{}),isSubmitting?'Creating...':'Create Vehicle']})]})]}),/*#__PURE__*/_jsx(FormCard,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(FormGrid,{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"plateNo\",children:\"Plate Number *\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"plateNo\",name:\"plateNo\",value:formData.plateNo,onChange:handleInputChange,placeholder:\"e.g., ABC-123\",hasError:errors.length>0})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"fleetNo\",children:\"Fleet Number *\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"fleetNo\",name:\"fleetNo\",value:formData.fleetNo,onChange:handleInputChange,placeholder:\"e.g., FL001\",hasError:errors.length>0})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"vehicleModel\",children:\"Vehicle Model *\"}),/*#__PURE__*/_jsx(VehicleModelSearchDropdown,{value:formData.vehicleModel,onChange:handleVehicleModelChange,placeholder:\"Search for vehicle model...\",hasError:errors.length>0})]}),errors.length>0&&/*#__PURE__*/_jsx(FormGroup,{children:errors.map((error,index)=>/*#__PURE__*/_jsx(ErrorMessage,{children:error},index))})]})})})]});};export default CreateVehicle;","map":{"version":3,"names":["React","useState","useNavigate","FiSave","FiArrowLeft","Button","PageContainer","PageHeader","PageTitle","HeaderActions","BackButton","FormCard","FormGrid","FormGroup","Label","Input","ErrorMessage","dataService","VehicleModelSearchDropdown","jsx","_jsx","jsxs","_jsxs","CreateVehicle","navigate","formData","setFormData","plateNo","fleetNo","vehicleModel","errors","setErrors","isSubmitting","setIsSubmitting","handleInputChange","e","name","value","target","prev","_objectSpread","length","handleVehicleModelChange","model","validateForm","newErrors","trim","push","handleSubmit","preventDefault","_formData$vehicleMode","vehicleData","vehicleModelId","id","createVehicle","error","console","alert","handleCancel","className","children","style","display","alignItems","gap","onClick","size","variant","disabled","onSubmit","htmlFor","type","onChange","placeholder","hasError","map","index"],"sources":["/home/mhmdal/Projects/moveo-master/moveo/src/pages/Vehicles/CreateVehicle.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiTruck, FiSave, FiArrowLeft } from 'react-icons/fi';\nimport { Button } from '../../styles/GlobalStyles';\nimport { \n  PageContainer,\n  PageHeader,\n  PageTitle,\n  HeaderActions,\n  BackButton,\n  FormCard,\n  FormGrid,\n  FormGroup,\n  Label,\n  Input,\n  ErrorMessage\n} from '../../components/Common/CommonStyles';\nimport { Vehicle, VehicleModel } from '../../types';\nimport { dataService } from '../../services/dataService';\nimport VehicleModelSearchDropdown from '../../components/UI/DropDowns/VehicleModelSearchDropdown';\n\ninterface VehicleFormData {\n  plateNo: string;\n  fleetNo: string;\n  vehicleModel: VehicleModel | null;\n}\n\nconst CreateVehicle: React.FC = () => {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState<VehicleFormData>({\n    plateNo: '',\n    fleetNo: '',\n    vehicleModel: null\n  });\n  const [errors, setErrors] = useState<string[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Clear errors when user starts typing\n    if (errors.length > 0) {\n      setErrors([]);\n    }\n  };\n\n  const handleVehicleModelChange = (model: VehicleModel | null) => {\n    setFormData(prev => ({ ...prev, vehicleModel: model }));\n    \n    // Clear errors when user selects a model\n    if (errors.length > 0) {\n      setErrors([]);\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: string[] = [];\n\n    if (!formData.plateNo.trim()) {\n      newErrors.push('Plate number is required');\n    }\n\n    if (!formData.fleetNo.trim()) {\n      newErrors.push('Fleet number is required');\n    }\n\n    if (!formData.vehicleModel) {\n      newErrors.push('Vehicle model is required');\n    }\n\n    setErrors(newErrors);\n    return newErrors.length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n    \n    try {\n      const vehicleData = {\n        plateNo: formData.plateNo,\n        fleetNo: formData.fleetNo,\n        vehicleModelId: formData.vehicleModel?.id || 0,\n      };  \n      \n      await dataService.createVehicle(vehicleData);\n      navigate('/vehicles');\n    } catch (error) {\n      console.error('Error creating vehicle:', error);\n      alert('Failed to create vehicle. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate('/vehicles');\n  };\n\n  return (\n    <PageContainer className=\"fade-in\">\n      <PageHeader>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\n          <BackButton onClick={handleCancel}>\n            <FiArrowLeft size={18} />\n          </BackButton>\n          <PageTitle>Create New Vehicle</PageTitle>\n        </div>\n        <HeaderActions>\n          <Button variant=\"secondary\" onClick={handleCancel} disabled={isSubmitting}>\n            Cancel\n          </Button>\n          <Button \n            variant=\"primary\" \n            onClick={handleSubmit}\n            disabled={isSubmitting}\n          >\n            <FiSave />\n            {isSubmitting ? 'Creating...' : 'Create Vehicle'}\n          </Button>\n        </HeaderActions>\n      </PageHeader>\n\n      <FormCard>\n        <form onSubmit={handleSubmit}>\n          <FormGrid>\n            <FormGroup>\n              <Label htmlFor=\"plateNo\">Plate Number *</Label>\n              <Input\n                type=\"text\"\n                id=\"plateNo\"\n                name=\"plateNo\"\n                value={formData.plateNo}\n                onChange={handleInputChange}\n                placeholder=\"e.g., ABC-123\"\n                hasError={errors.length > 0}\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <Label htmlFor=\"fleetNo\">Fleet Number *</Label>\n              <Input\n                type=\"text\"\n                id=\"fleetNo\"\n                name=\"fleetNo\"\n                value={formData.fleetNo}\n                onChange={handleInputChange}\n                placeholder=\"e.g., FL001\"\n                hasError={errors.length > 0}\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <Label htmlFor=\"vehicleModel\">Vehicle Model *</Label>\n              <VehicleModelSearchDropdown\n                value={formData.vehicleModel}\n                onChange={handleVehicleModelChange}\n                placeholder=\"Search for vehicle model...\"\n                hasError={errors.length > 0}\n              />\n            </FormGroup>\n\n            {errors.length > 0 && (\n              <FormGroup>\n                {errors.map((error, index) => (\n                  <ErrorMessage key={index}>{error}</ErrorMessage>\n                ))}\n              </FormGroup>\n            )}\n          </FormGrid>\n        </form>\n      </FormCard>\n    </PageContainer>\n  );\n};\n\nexport default CreateVehicle;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}