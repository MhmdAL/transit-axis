{"ast":null,"code":"import{apiService}from'./apiService';// import { mockAPI } from './mockData';\n// Unified data service interface\n// Mock data adapter to match API interface\n// class MockDataAdapter implements IDataService {\n//   // Vehicles\n//   async getVehicles(): Promise<Vehicle[]> {\n//     return mockAPI.getVehicles();\n//   }\n//   async getVehicleById(id: string): Promise<Vehicle | null> {\n//     return mockAPI.getVehicleById(id);\n//   }\n//   async createVehicle(data: CreateVehicleRequest): Promise<Vehicle> {\n//     // Convert API request to mock data format\n//     const newVehicle: Vehicle = {\n//       id: Date.now().toString(),\n//       plateNumber: data.plateNumber,\n//       make: data.make,\n//       model: data.model,\n//       year: data.year,\n//       fleetNumber: data.fleetNumber,\n//       color: data.color,\n//       vin: data.vin,\n//     //   capacity: data.capacity || 0,\n//     //   fuelType: data.fuelType || 'gasoline',\n//       status: data.status || 'active',\n//       mileage: 0,\n//       lastMaintenance: new Date(),\n//       nextMaintenance: new Date(),\n//     //   currentLocation: { lat: 0, lng: 0 },\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     // In real implementation, this would update the mock data store\n//     return Promise.resolve(newVehicle);\n//   }\n//   async updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle> {\n//     const existing = await this.getVehicleById(id);\n//     if (!existing) throw new Error('Vehicle not found');\n//     const updated: Vehicle = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n//   async deleteVehicle(id: string): Promise<void> {\n//     // Mock implementation\n//     return Promise.resolve();\n//   }\n//   // Drivers\n//   async getDrivers(): Promise<Driver[]> {\n//     return mockAPI.getDrivers();\n//   }\n//   async getDriverById(id: string): Promise<Driver | null> {\n//     return mockAPI.getDriverById(id);\n//   }\n//   async createDriver(data: CreateDriverRequest): Promise<Driver> {\n//     const newDriver: Driver = {\n//       id: Date.now().toString(),\n//       firstName: data.firstName,\n//       lastName: data.lastName,\n//       email: data.email,\n//       phone: data.phone,\n//       employeeId: data.employeeId,\n//       licenseNumber: data.licenseNumber,\n//       licenseClass: data.licenseClass,\n//       licenseExpiry: new Date(data.licenseExpiry),\n//       dateOfBirth: new Date(data.dateOfBirth),\n//       address: data.address,\n//     //   status: data.status || 'active',\n//       rating: 0,\n//       totalTrips: 0,\n//       totalDistance: 0,\n//       joinDate: new Date(),\n//     //   currentLocation: { lat: 0, lng: 0 },\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newDriver);\n//   }\n//   async updateDriver(id: string, data: UpdateDriverRequest): Promise<Driver> {\n//     const existing = await this.getDriverById(id);\n//     if (!existing) throw new Error('Driver not found');\n//     const updated: Driver = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n//   async deleteDriver(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n//   // Routes\n//   async getRoutes(): Promise<Route[]> {\n//     return mockAPI.getRoutes();\n//   }\n//   async getRouteById(id: string): Promise<Route | null> {\n//     return mockAPI.getRouteById(id);\n//   }\n//   async createRoute(data: CreateRouteRequest): Promise<Route> {\n//     const newRoute: Route = {\n//       id: Date.now().toString(),\n//       name: data.name,\n//       description: data.description,\n//       startLocation: data.startLocation,\n//       endLocation: data.endLocation,\n//       stops: data.stops,\n//       estimatedDistance: data.estimatedDistance,\n//       estimatedDuration: data.estimatedDuration,\n//       status: data.status || 'active',\n//       assignedVehicles: [],\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newRoute);\n//   }\n//   async updateRoute(id: string, data: UpdateRouteRequest): Promise<Route> {\n//     const existing = await this.getRouteById(id);\n//     if (!existing) throw new Error('Route not found');\n//     const updated: Route = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n//   async deleteRoute(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n//   // Stops\n//   async getStops(): Promise<Stop[]> {\n//     return mockAPI.getStops();\n//   }\n//   async getStopById(id: string): Promise<Stop | null> {\n//     return mockAPI.getStopById(id);\n//   }\n//   async createStop(data: CreateStopRequest): Promise<Stop> {\n//     const newStop: Stop = {\n//       id: Date.now().toString(),\n//       name: data.name,\n//       code: data.code,\n//       location: data.location,\n//       address: data.address,\n//       description: data.description,\n//       type: data.type,\n//       isActive: data.isActive !== false,\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newStop);\n//   }\n//   async updateStop(id: string, data: UpdateStopRequest): Promise<Stop> {\n//     const existing = await this.getStopById(id);\n//     if (!existing) throw new Error('Stop not found');\n//     const updated: Stop = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n//   async deleteStop(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n//   // Trips\n//   async getTrips(): Promise<Trip[]> {\n//     return mockAPI.getTrips();\n//   }\n//   async getTripById(id: string): Promise<Trip | null> {\n//     return mockAPI.getTripById(id);\n//   }\n//   async createTrip(data: CreateTripRequest): Promise<Trip> {\n//     const newTrip: Trip = {\n//       id: Date.now().toString(),\n//       code: data.code,\n//       routeId: data.routeId,\n//       scheduledStartTime: new Date(data.scheduledStartTime),\n//       scheduledEndTime: new Date(data.scheduledEndTime),\n//       status: 'planned',\n//       notes: data.notes,\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newTrip);\n//   }\n//   async updateTrip(id: string, data: UpdateTripRequest): Promise<Trip> {\n//     const existing = await this.getTripById(id);\n//     if (!existing) throw new Error('Trip not found');\n//     const updated: Trip = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n//   async deleteTrip(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n//   async assignVehicleToTrip(data: AssignVehicleRequest): Promise<Trip> {\n//     return this.updateTrip(data.tripId, { vehicleId: data.vehicleId });\n//   }\n//   async assignDriverToTrip(data: AssignDriverRequest): Promise<Trip> {\n//     return this.updateTrip(data.tripId, { driverId: data.driverId });\n//   }\n//   // Dashboard\n//   async getDashboardStats(): Promise<DashboardStats> {\n//     return mockAPI.getDashboardStats();\n//   }\n// }\n// API data adapter\nclass ApiDataAdapter{// Vehicles\nasync getVehicles(params){return apiService.getVehicles(params);}async getVehicleById(id){try{return await apiService.getVehicleById(id);}catch(error){return null;}}async createVehicle(data){return apiService.createVehicle(data);}async updateVehicle(id,data){return apiService.updateVehicle(id,data);}async deleteVehicle(id){return apiService.deleteVehicle(id);}// Drivers\nasync getDrivers(params){return apiService.getDrivers(params);}async getDriverById(id){try{return await apiService.getDriverById(id);}catch(error){return null;}}async createDriver(data){return apiService.createDriver(data);}async updateDriver(id,data){return apiService.updateDriver(id,data);}async deleteDriver(id){return apiService.deleteDriver(id);}// Routes\nasync getRoutes(params){return apiService.getRoutes(params);}async getRouteById(id){try{return await apiService.getRouteById(id);}catch(error){return null;}}async createRoute(data){return apiService.createRoute(data);}async updateRoute(id,data){return apiService.updateRoute(id,data);}async deleteRoute(id){return apiService.deleteRoute(id);}// Stops\nasync getStops(params){return apiService.getStops(params);}async getStopById(id){try{return await apiService.getStopById(id);}catch(error){return null;}}async createStop(data){return apiService.createStop(data);}async updateStop(id,data){return apiService.updateStop(id,data);}async deleteStop(id){return apiService.deleteStop(id);}// Trips\nasync getTrips(params){return apiService.getTrips(params);}async getTripById(id){try{return await apiService.getTripById(id);}catch(error){return null;}}async createTrip(data){return apiService.createTrip(data);}async updateTrip(id,data){return apiService.updateTrip(id,data);}async deleteTrip(id){return apiService.deleteTrip(id);}async assignVehicleToTrip(data){return apiService.assignVehicleToTrip(data);}async assignDriverToTrip(data){return apiService.assignDriverToTrip(data);}// Dashboard\nasync getDashboardStats(){return apiService.getDashboardStats();}// Vehicle Models\nasync getVehicleModels(params){return apiService.getVehicleModels(params);}async searchVehicleModels(search){return apiService.searchVehicleModels(search);}async getVehicleModelById(id){try{return await apiService.getVehicleModelById(id);}catch(error){return null;}}// Authentication\nasync generateUserOtp(username){return apiService.generateUserOtp(username);}async loginUserWithOtp(username,otp){return apiService.loginUserWithOtp(username,otp);}async createUser(data){return apiService.createUser(data);}async activateAccount(data){return apiService.activateAccount(data);}async loginWithPassword(username,password){return apiService.loginWithPassword(username,password);}async requestPasswordReset(email){return apiService.requestPasswordReset(email);}async resetPassword(data){return apiService.resetPassword(data);}async getUsers(params){return apiService.getUsers(params);}// Service Schedules\nasync getServiceSchedules(params){return apiService.getServiceSchedules(params);}async getServiceScheduleById(id){try{return await apiService.getServiceScheduleById(id);}catch(error){return null;}}async createServiceSchedule(data){return apiService.createServiceSchedule(data);}async updateServiceSchedule(id,data){return apiService.updateServiceSchedule(id,data);}async deleteServiceSchedule(id){return apiService.deleteServiceSchedule(id);}// Duties\nasync getDuties(params){return apiService.getDuties(params);}async getDutyById(id){try{return await apiService.getDutyById(id);}catch(error){return null;}}async createDuty(data){return apiService.createDuty(data);}async updateDuty(id,data){return apiService.updateDuty(id,data);}async deleteDuty(id){return apiService.deleteDuty(id);}async createBulkTripDuties(data){return apiService.createBulkTripDuties(data);}async bulkUpdateDutyAssignments(data){return apiService.bulkUpdateDutyAssignments(data);}}// Create the appropriate data service based on configuration\nexport const dataService=new ApiDataAdapter();// Export types and classes for testing\nexport{ApiDataAdapter};","map":{"version":3,"names":["apiService","ApiDataAdapter","getVehicles","params","getVehicleById","id","error","createVehicle","data","updateVehicle","deleteVehicle","getDrivers","getDriverById","createDriver","updateDriver","deleteDriver","getRoutes","getRouteById","createRoute","updateRoute","deleteRoute","getStops","getStopById","createStop","updateStop","deleteStop","getTrips","getTripById","createTrip","updateTrip","deleteTrip","assignVehicleToTrip","assignDriverToTrip","getDashboardStats","getVehicleModels","searchVehicleModels","search","getVehicleModelById","generateUserOtp","username","loginUserWithOtp","otp","createUser","activateAccount","loginWithPassword","password","requestPasswordReset","email","resetPassword","getUsers","getServiceSchedules","getServiceScheduleById","createServiceSchedule","updateServiceSchedule","deleteServiceSchedule","getDuties","getDutyById","createDuty","updateDuty","deleteDuty","createBulkTripDuties","bulkUpdateDutyAssignments","dataService"],"sources":["/home/mhmdal/Projects/moveo-master/moveo/src/services/dataService.ts"],"sourcesContent":["import { API_CONFIG } from '../config/api';\nimport { apiService } from './apiService';\n// import { mockAPI } from './mockData';\nimport { \n  Vehicle, \n  Driver, \n  Route, \n  Stop, \n  Trip, \n  DashboardStats,\n  VehicleModel,\n  User,\n  ServiceSchedule,\n  Duty,\n  TripDuty\n} from '../types';\nimport { \n  ListQueryParams,\n  DutyQueryParams,\n  CreateVehicleRequest,\n  UpdateVehicleRequest,\n  CreateDriverRequest,\n  UpdateDriverRequest,\n  CreateRouteRequest,\n  UpdateRouteRequest,\n  CreateStopRequest,\n  UpdateStopRequest,\n  CreateTripRequest,\n  UpdateTripRequest,\n  AssignVehicleRequest,\n  AssignDriverRequest,\n  CreateServiceScheduleRequest,\n  UpdateServiceScheduleRequest,\n  CreateDutyRequest,\n  UpdateDutyRequest,\n  CreateBulkTripDutiesRequest,\n  BulkUpdateDutyAssignmentsRequest\n} from '../types/api';\n\n// Unified data service interface\ninterface IDataService {\n  // Vehicles\n  getVehicles(params?: ListQueryParams): Promise<Vehicle[]>;\n  getVehicleById(id: string): Promise<Vehicle | null>;\n  createVehicle(data: CreateVehicleRequest): Promise<Vehicle>;\n  updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle>;\n  deleteVehicle(id: string): Promise<void>;\n\n  // Drivers\n  getDrivers(params?: ListQueryParams): Promise<Driver[]>;\n  getDriverById(id: string): Promise<Driver | null>;\n  createDriver(data: CreateDriverRequest): Promise<Driver>;\n  updateDriver(id: string, data: CreateDriverRequest): Promise<Driver>;\n  deleteDriver(id: string): Promise<void>;\n\n  // Routes\n  getRoutes(params?: ListQueryParams): Promise<Route[]>;\n  getRouteById(id: string): Promise<Route | null>;\n  createRoute(data: CreateRouteRequest): Promise<Route>;\n  updateRoute(id: string, data: UpdateRouteRequest): Promise<Route>;\n  deleteRoute(id: string): Promise<void>;\n\n  // Stops\n  getStops(params?: ListQueryParams): Promise<Stop[]>;\n  getStopById(id: string): Promise<Stop | null>;\n  createStop(data: CreateStopRequest): Promise<Stop>;\n  updateStop(id: string, data: UpdateStopRequest): Promise<Stop>;\n  deleteStop(id: string): Promise<void>;\n\n  // Trips\n  getTrips(params?: ListQueryParams): Promise<Trip[]>;\n  getTripById(id: string): Promise<Trip | null>;\n  createTrip(data: CreateTripRequest): Promise<Trip>;\n  updateTrip(id: string, data: UpdateTripRequest): Promise<Trip>;\n  deleteTrip(id: string): Promise<void>;\n  assignVehicleToTrip(data: AssignVehicleRequest): Promise<Trip>;\n  assignDriverToTrip(data: AssignDriverRequest): Promise<Trip>;\n\n  // Dashboard\n  getDashboardStats(): Promise<DashboardStats>;\n\n  // Vehicle Models\n  getVehicleModels(params?: ListQueryParams): Promise<VehicleModel[]>;\n  searchVehicleModels(search: string): Promise<VehicleModel[]>;\n  getVehicleModelById(id: string): Promise<VehicleModel | null>;\n\n  // Authentication\n  generateUserOtp(username: string): Promise<{ otp: string }>;\n  loginUserWithOtp(username: string, otp: string): Promise<{ token: string; user: any }>;\n  createUser(data: { name: string; qid?: string; email: string; phone: string }): Promise<any>;\n  activateAccount(data: { activationCode: string; password: string; username: string }): Promise<any>;\n  loginWithPassword(username: string, password: string): Promise<{ token: string; user: any }>;\n  requestPasswordReset(email: string): Promise<{ message: string }>;\n  resetPassword(data: { resetCode: string; newPassword: string }): Promise<{ message: string }>;\n  getUsers(params?: { page?: number; limit?: number; search?: string }): Promise<User[]>;\n\n  // Service Schedules\n  getServiceSchedules(params?: ListQueryParams): Promise<ServiceSchedule[]>;\n  getServiceScheduleById(id: string): Promise<ServiceSchedule | null>;\n  createServiceSchedule(data: CreateServiceScheduleRequest): Promise<ServiceSchedule>;\n  updateServiceSchedule(id: string, data: UpdateServiceScheduleRequest): Promise<ServiceSchedule>;\n  deleteServiceSchedule(id: string): Promise<void>;\n\n  // Duties\n  getDuties(params?: DutyQueryParams): Promise<Duty[]>;\n  getDutyById(id: string): Promise<Duty | null>;\n  createDuty(data: CreateDutyRequest): Promise<Duty>;\n  updateDuty(id: string, data: UpdateDutyRequest): Promise<Duty>;\n  deleteDuty(id: string): Promise<void>;\n  createBulkTripDuties(data: CreateBulkTripDutiesRequest): Promise<{ duties: Duty[]; tripDuties: TripDuty[] }>;\n  bulkUpdateDutyAssignments(data: BulkUpdateDutyAssignmentsRequest): Promise<Duty[]>;\n}\n\n// Mock data adapter to match API interface\n// class MockDataAdapter implements IDataService {\n//   // Vehicles\n//   async getVehicles(): Promise<Vehicle[]> {\n//     return mockAPI.getVehicles();\n//   }\n\n//   async getVehicleById(id: string): Promise<Vehicle | null> {\n//     return mockAPI.getVehicleById(id);\n//   }\n\n//   async createVehicle(data: CreateVehicleRequest): Promise<Vehicle> {\n//     // Convert API request to mock data format\n//     const newVehicle: Vehicle = {\n//       id: Date.now().toString(),\n//       plateNumber: data.plateNumber,\n//       make: data.make,\n//       model: data.model,\n//       year: data.year,\n//       fleetNumber: data.fleetNumber,\n//       color: data.color,\n//       vin: data.vin,\n//     //   capacity: data.capacity || 0,\n//     //   fuelType: data.fuelType || 'gasoline',\n//       status: data.status || 'active',\n//       mileage: 0,\n//       lastMaintenance: new Date(),\n//       nextMaintenance: new Date(),\n//     //   currentLocation: { lat: 0, lng: 0 },\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     // In real implementation, this would update the mock data store\n//     return Promise.resolve(newVehicle);\n//   }\n\n//   async updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle> {\n//     const existing = await this.getVehicleById(id);\n//     if (!existing) throw new Error('Vehicle not found');\n    \n//     const updated: Vehicle = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n\n//   async deleteVehicle(id: string): Promise<void> {\n//     // Mock implementation\n//     return Promise.resolve();\n//   }\n\n//   // Drivers\n//   async getDrivers(): Promise<Driver[]> {\n//     return mockAPI.getDrivers();\n//   }\n\n//   async getDriverById(id: string): Promise<Driver | null> {\n//     return mockAPI.getDriverById(id);\n//   }\n\n//   async createDriver(data: CreateDriverRequest): Promise<Driver> {\n//     const newDriver: Driver = {\n//       id: Date.now().toString(),\n//       firstName: data.firstName,\n//       lastName: data.lastName,\n//       email: data.email,\n//       phone: data.phone,\n//       employeeId: data.employeeId,\n//       licenseNumber: data.licenseNumber,\n//       licenseClass: data.licenseClass,\n//       licenseExpiry: new Date(data.licenseExpiry),\n//       dateOfBirth: new Date(data.dateOfBirth),\n//       address: data.address,\n//     //   status: data.status || 'active',\n//       rating: 0,\n//       totalTrips: 0,\n//       totalDistance: 0,\n//       joinDate: new Date(),\n//     //   currentLocation: { lat: 0, lng: 0 },\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newDriver);\n//   }\n\n//   async updateDriver(id: string, data: UpdateDriverRequest): Promise<Driver> {\n//     const existing = await this.getDriverById(id);\n//     if (!existing) throw new Error('Driver not found');\n    \n//     const updated: Driver = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n\n//   async deleteDriver(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n\n//   // Routes\n//   async getRoutes(): Promise<Route[]> {\n//     return mockAPI.getRoutes();\n//   }\n\n//   async getRouteById(id: string): Promise<Route | null> {\n//     return mockAPI.getRouteById(id);\n//   }\n\n//   async createRoute(data: CreateRouteRequest): Promise<Route> {\n//     const newRoute: Route = {\n//       id: Date.now().toString(),\n//       name: data.name,\n//       description: data.description,\n//       startLocation: data.startLocation,\n//       endLocation: data.endLocation,\n//       stops: data.stops,\n//       estimatedDistance: data.estimatedDistance,\n//       estimatedDuration: data.estimatedDuration,\n//       status: data.status || 'active',\n//       assignedVehicles: [],\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newRoute);\n//   }\n\n//   async updateRoute(id: string, data: UpdateRouteRequest): Promise<Route> {\n//     const existing = await this.getRouteById(id);\n//     if (!existing) throw new Error('Route not found');\n    \n//     const updated: Route = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n\n//   async deleteRoute(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n\n//   // Stops\n//   async getStops(): Promise<Stop[]> {\n//     return mockAPI.getStops();\n//   }\n\n//   async getStopById(id: string): Promise<Stop | null> {\n//     return mockAPI.getStopById(id);\n//   }\n\n//   async createStop(data: CreateStopRequest): Promise<Stop> {\n//     const newStop: Stop = {\n//       id: Date.now().toString(),\n//       name: data.name,\n//       code: data.code,\n//       location: data.location,\n//       address: data.address,\n//       description: data.description,\n//       type: data.type,\n//       isActive: data.isActive !== false,\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newStop);\n//   }\n\n//   async updateStop(id: string, data: UpdateStopRequest): Promise<Stop> {\n//     const existing = await this.getStopById(id);\n//     if (!existing) throw new Error('Stop not found');\n    \n//     const updated: Stop = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n\n//   async deleteStop(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n\n//   // Trips\n//   async getTrips(): Promise<Trip[]> {\n//     return mockAPI.getTrips();\n//   }\n\n//   async getTripById(id: string): Promise<Trip | null> {\n//     return mockAPI.getTripById(id);\n//   }\n\n//   async createTrip(data: CreateTripRequest): Promise<Trip> {\n//     const newTrip: Trip = {\n//       id: Date.now().toString(),\n//       code: data.code,\n//       routeId: data.routeId,\n//       scheduledStartTime: new Date(data.scheduledStartTime),\n//       scheduledEndTime: new Date(data.scheduledEndTime),\n//       status: 'planned',\n//       notes: data.notes,\n//       createdAt: new Date(),\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(newTrip);\n//   }\n\n//   async updateTrip(id: string, data: UpdateTripRequest): Promise<Trip> {\n//     const existing = await this.getTripById(id);\n//     if (!existing) throw new Error('Trip not found');\n    \n//     const updated: Trip = {\n//       ...existing,\n//       ...data,\n//       updatedAt: new Date()\n//     };\n//     return Promise.resolve(updated);\n//   }\n\n//   async deleteTrip(id: string): Promise<void> {\n//     return Promise.resolve();\n//   }\n\n//   async assignVehicleToTrip(data: AssignVehicleRequest): Promise<Trip> {\n//     return this.updateTrip(data.tripId, { vehicleId: data.vehicleId });\n//   }\n\n//   async assignDriverToTrip(data: AssignDriverRequest): Promise<Trip> {\n//     return this.updateTrip(data.tripId, { driverId: data.driverId });\n//   }\n\n//   // Dashboard\n//   async getDashboardStats(): Promise<DashboardStats> {\n//     return mockAPI.getDashboardStats();\n//   }\n// }\n\n// API data adapter\nclass ApiDataAdapter implements IDataService {\n  // Vehicles\n  async getVehicles(params?: ListQueryParams): Promise<Vehicle[]> {\n    return apiService.getVehicles(params);\n  }\n\n  async getVehicleById(id: string): Promise<Vehicle | null> {\n    try {\n      return await apiService.getVehicleById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createVehicle(data: CreateVehicleRequest): Promise<Vehicle> {\n    return apiService.createVehicle(data);\n  }\n\n  async updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle> {\n    return apiService.updateVehicle(id, data);\n  }\n\n  async deleteVehicle(id: string): Promise<void> {\n    return apiService.deleteVehicle(id);\n  }\n\n  // Drivers\n  async getDrivers(params?: ListQueryParams): Promise<Driver[]> {\n    return apiService.getDrivers(params);\n  }\n\n  async getDriverById(id: string): Promise<Driver | null> {\n    try {\n      return await apiService.getDriverById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createDriver(data: CreateDriverRequest): Promise<Driver> {\n    return apiService.createDriver(data);\n  }\n\n  async updateDriver(id: string, data: CreateDriverRequest): Promise<Driver> {\n    return apiService.updateDriver(id, data);\n  }\n\n  async deleteDriver(id: string): Promise<void> {\n    return apiService.deleteDriver(id);\n  }\n\n  // Routes\n  async getRoutes(params?: ListQueryParams): Promise<Route[]> {\n    return apiService.getRoutes(params);\n  }\n\n  async getRouteById(id: string): Promise<Route | null> {\n    try {\n      return await apiService.getRouteById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createRoute(data: CreateRouteRequest): Promise<Route> {\n    return apiService.createRoute(data);\n  }\n\n  async updateRoute(id: string, data: UpdateRouteRequest): Promise<Route> {\n    return apiService.updateRoute(id, data);\n  }\n\n  async deleteRoute(id: string): Promise<void> {\n    return apiService.deleteRoute(id);\n  }\n\n  // Stops\n  async getStops(params?: ListQueryParams): Promise<Stop[]> {\n    return apiService.getStops(params);\n  }\n\n  async getStopById(id: string): Promise<Stop | null> {\n    try {\n      return await apiService.getStopById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createStop(data: CreateStopRequest): Promise<Stop> {\n    return apiService.createStop(data);\n  }\n\n  async updateStop(id: string, data: UpdateStopRequest): Promise<Stop> {\n    return apiService.updateStop(id, data);\n  }\n\n  async deleteStop(id: string): Promise<void> {\n    return apiService.deleteStop(id);\n  }\n\n  // Trips\n  async getTrips(params?: ListQueryParams): Promise<Trip[]> {\n    return apiService.getTrips(params);\n  }\n\n  async getTripById(id: string): Promise<Trip | null> {\n    try {\n      return await apiService.getTripById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createTrip(data: CreateTripRequest): Promise<Trip> {\n    return apiService.createTrip(data);\n  }\n\n  async updateTrip(id: string, data: UpdateTripRequest): Promise<Trip> {\n    return apiService.updateTrip(id, data);\n  }\n\n  async deleteTrip(id: string): Promise<void> {\n    return apiService.deleteTrip(id);\n  }\n\n  async assignVehicleToTrip(data: AssignVehicleRequest): Promise<Trip> {\n    return apiService.assignVehicleToTrip(data);\n  }\n\n  async assignDriverToTrip(data: AssignDriverRequest): Promise<Trip> {\n    return apiService.assignDriverToTrip(data);\n  }\n\n  // Dashboard\n  async getDashboardStats(): Promise<DashboardStats> {\n    return apiService.getDashboardStats();\n  }\n\n  // Vehicle Models\n  async getVehicleModels(params?: ListQueryParams): Promise<VehicleModel[]> {\n    return apiService.getVehicleModels(params);\n  }\n\n  async searchVehicleModels(search: string): Promise<VehicleModel[]> {\n    return apiService.searchVehicleModels(search);\n  }\n\n  async getVehicleModelById(id: string): Promise<VehicleModel | null> {\n    try {\n      return await apiService.getVehicleModelById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  // Authentication\n  async generateUserOtp(username: string): Promise<{ otp: string }> {\n    return apiService.generateUserOtp(username);\n  }\n\n  async loginUserWithOtp(username: string, otp: string): Promise<{ token: string; user: any }> {\n    return apiService.loginUserWithOtp(username, otp);\n  }\n\n  async createUser(data: { name: string; phone: string; email: string; qid?: string }): Promise<any> {\n    return apiService.createUser(data);\n  }\n\n  async activateAccount(data: { activationCode: string; password: string; username: string }): Promise<any> {\n    return apiService.activateAccount(data);\n  }\n\n  async loginWithPassword(username: string, password: string): Promise<{ token: string; user: any }> {\n    return apiService.loginWithPassword(username, password);\n  }\n\n  async requestPasswordReset(email: string): Promise<{ message: string }> {\n    return apiService.requestPasswordReset(email);\n  }\n\n  async resetPassword(data: { resetCode: string; newPassword: string }): Promise<{ message: string }> {\n    return apiService.resetPassword(data);\n  }\n\n  async getUsers(params?: { page?: number; limit?: number; search?: string }): Promise<User[]> {\n    return apiService.getUsers(params);\n  }\n\n  // Service Schedules\n  async getServiceSchedules(params?: ListQueryParams): Promise<ServiceSchedule[]> {\n    return apiService.getServiceSchedules(params);\n  }\n\n  async getServiceScheduleById(id: string): Promise<ServiceSchedule | null> {\n    try {\n      return await apiService.getServiceScheduleById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createServiceSchedule(data: CreateServiceScheduleRequest): Promise<ServiceSchedule> {\n    return apiService.createServiceSchedule(data);\n  }\n\n  async updateServiceSchedule(id: string, data: UpdateServiceScheduleRequest): Promise<ServiceSchedule> {\n    return apiService.updateServiceSchedule(id, data);\n  }\n\n  async deleteServiceSchedule(id: string): Promise<void> {\n    return apiService.deleteServiceSchedule(id);\n  }\n\n  // Duties\n  async getDuties(params?: DutyQueryParams): Promise<Duty[]> {\n    return apiService.getDuties(params);\n  }\n\n  async getDutyById(id: string): Promise<Duty | null> {\n    try {\n      return await apiService.getDutyById(id);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async createDuty(data: CreateDutyRequest): Promise<Duty> {\n    return apiService.createDuty(data);\n  }\n\n  async updateDuty(id: string, data: UpdateDutyRequest): Promise<Duty> {\n    return apiService.updateDuty(id, data);\n  }\n\n  async deleteDuty(id: string): Promise<void> {\n    return apiService.deleteDuty(id);\n  }\n\n  async createBulkTripDuties(data: CreateBulkTripDutiesRequest): Promise<{ duties: Duty[]; tripDuties: TripDuty[] }> {\n    return apiService.createBulkTripDuties(data);\n  }\n\n  async bulkUpdateDutyAssignments(data: BulkUpdateDutyAssignmentsRequest): Promise<Duty[]> {\n    return apiService.bulkUpdateDutyAssignments(data);\n  }\n}\n\n// Create the appropriate data service based on configuration\nexport const dataService: IDataService = new ApiDataAdapter();\n\n// Export types and classes for testing\nexport type { IDataService };\nexport { ApiDataAdapter };\n"],"mappings":"AACA,OAASA,UAAU,KAAQ,cAAc,CACzC;AAqCA;AA0EA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA,KAAM,CAAAC,cAAuC,CAC3C;AACA,KAAM,CAAAC,WAAWA,CAACC,MAAwB,CAAsB,CAC9D,MAAO,CAAAH,UAAU,CAACE,WAAW,CAACC,MAAM,CAAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}