{"ast":null,"code":"var _jsxFileName = \"/home/mhmdal/Projects/moveo/src/components/Map/RouteMap.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Polyline, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport styled from 'styled-components';\nimport { theme } from '../../styles/theme';\nimport { RoutingService } from '../../services/routingService';\n\n// Fix for default markers in React Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\n\n// Create custom colored markers\nconst createCustomIcon = color => {\n  return L.divIcon({\n    className: 'custom-marker',\n    html: `\n      <div style=\"\n        background-color: ${color};\n        width: 25px;\n        height: 25px;\n        border-radius: 50% 50% 50% 0;\n        border: 3px solid white;\n        transform: rotate(-45deg);\n        box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      \">\n        <div style=\"\n          transform: rotate(45deg);\n          color: white;\n          font-weight: bold;\n          font-size: 12px;\n        \"></div>\n      </div>\n    `,\n    iconSize: [25, 25],\n    iconAnchor: [12, 24],\n    popupAnchor: [0, -24]\n  });\n};\n\n// Default blue marker for available stops\nconst defaultIcon = createCustomIcon('#3b82f6');\n\n// Green marker for selected stops in route\nconst selectedIcon = createCustomIcon('#10b981');\nconst MapWrapper = styled.div`\n  width: 100%;\n  height: ${({\n  height\n}) => height || '500px'};\n  border: 2px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.lg};\n  overflow: hidden;\n  position: relative;\n  \n  .leaflet-container {\n    height: 100%;\n    width: 100%;\n    background: ${theme.colors.surface};\n  }\n  \n  .leaflet-control-container {\n    .leaflet-control-zoom {\n      background: ${theme.colors.card};\n      border: 1px solid ${theme.colors.border};\n      \n      a {\n        background: ${theme.colors.card};\n        color: ${theme.colors.textPrimary};\n        border-bottom: 1px solid ${theme.colors.border};\n        \n        &:hover {\n          background: ${theme.colors.cardHover};\n        }\n        \n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n    \n    .leaflet-control-attribution {\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      font-size: 11px;\n      \n      a {\n        color: #3b82f6;\n      }\n    }\n  }\n  \n  .leaflet-popup-content-wrapper {\n    background: ${theme.colors.card};\n    color: ${theme.colors.textPrimary};\n    border-radius: ${theme.borderRadius.md};\n    box-shadow: ${theme.shadows.lg};\n  }\n  \n  .leaflet-popup-tip {\n    background: ${theme.colors.card};\n  }\n\n  /* Custom marker styles for interactive stops */\n  .leaflet-marker-icon {\n    cursor: pointer;\n    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;\n    \n    &:hover {\n      transform: scale(1.1);\n      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));\n    }\n  }\n\n  /* Custom marker styling */\n  .custom-marker {\n    background: transparent !important;\n    border: none !important;\n  }\n`;\n_c = MapWrapper;\nconst MapSidebar = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 300px;\n  height: 100%;\n  background: ${theme.colors.card};\n  border-left: 1px solid ${theme.colors.border};\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n_c2 = MapSidebar;\nconst SidebarHeader = styled.div`\n  padding: ${theme.spacing.lg};\n  border-bottom: 1px solid ${theme.colors.border};\n  background: ${theme.colors.surface};\n`;\n_c3 = SidebarHeader;\nconst SidebarTitle = styled.h3`\n  margin: 0;\n  font-size: ${theme.typography.fontSize.lg};\n  font-weight: ${theme.typography.fontWeight.semibold};\n  color: ${theme.colors.textPrimary};\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\n_c4 = SidebarTitle;\nconst SidebarContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n_c5 = SidebarContent;\nconst ControlSection = styled.div`\n  padding: ${theme.spacing.lg};\n  border-bottom: 1px solid ${theme.colors.border};\n`;\n_c6 = ControlSection;\nconst ControlGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: ${theme.spacing.md};\n`;\n_c7 = ControlGroup;\nconst ToggleButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border: 1px solid ${({\n  active\n}) => active ? theme.colors.primary : theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  background: ${({\n  active\n}) => active ? theme.colors.primary : theme.colors.surface};\n  color: ${({\n  active\n}) => active ? 'white' : theme.colors.textPrimary};\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  \n  &:hover {\n    background: ${({\n  active\n}) => active ? theme.colors.primary : theme.colors.surfaceHover};\n    transform: translateY(-1px);\n  }\n`;\n_c8 = ToggleButton;\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  background: ${theme.colors.surface};\n  color: ${theme.colors.textPrimary};\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  \n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    transform: translateY(-1px);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n_c9 = ActionButton;\nconst SearchSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n_c0 = SearchSection;\nconst SearchContainer = styled.div`\n  position: relative;\n  padding: ${theme.spacing.lg};\n`;\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  background: ${theme.colors.surface};\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n  transition: all 0.2s ease-in-out;\n  \n  &:focus {\n    outline: none;\n    border-color: ${theme.colors.primary};\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n  \n  &::placeholder {\n    color: ${theme.colors.textMuted};\n  }\n`;\n_c1 = SearchInput;\nconst SearchDropdown = styled.div`\n  position: absolute;\n  top: 100%;\n  left: ${theme.spacing.lg};\n  right: ${theme.spacing.lg};\n  background: ${theme.colors.card};\n  border: 1px solid ${theme.colors.border};\n  border-top: none;\n  border-radius: 0 0 ${theme.borderRadius.md} ${theme.borderRadius.md};\n  box-shadow: ${theme.shadows.lg};\n  z-index: 1000;\n  max-height: 200px;\n  overflow-y: auto;\n  transform: translateY(${({\n  isOpen\n}) => isOpen ? '0' : '-10px'});\n  opacity: ${({\n  isOpen\n}) => isOpen ? '1' : '0'};\n  visibility: ${({\n  isOpen\n}) => isOpen ? 'visible' : 'hidden'};\n  transition: all 0.2s ease-in-out;\n`;\nconst DropdownItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border-bottom: 1px solid ${theme.colors.border};\n  \n  ${({\n  selected\n}) => selected ? `\n    background: rgba(59, 130, 246, 0.1);\n    color: ${theme.colors.primary};\n  ` : `\n    background: ${theme.colors.surface};\n    \n    &:hover {\n      background: ${theme.colors.surfaceHover};\n    }\n  `}\n  \n  &:last-child {\n    border-bottom: none;\n  }\n`;\nconst DropdownItemInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\nconst DropdownItemName = styled.div`\n  font-weight: ${theme.typography.fontWeight.medium};\n  color: inherit;\n  font-size: ${theme.typography.fontSize.sm};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\nconst DropdownItemCode = styled.div`\n  color: ${theme.colors.textSecondary};\n  font-size: ${theme.typography.fontSize.xs};\n  margin-top: ${theme.spacing.xs};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\nconst NoResults = styled.div`\n  padding: ${theme.spacing.md};\n  text-align: center;\n  color: ${theme.colors.textMuted};\n  font-size: ${theme.typography.fontSize.sm};\n`;\nconst SelectedStopsSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\nconst SelectedStopsHeader = styled.div`\n  padding: ${theme.spacing.lg} ${theme.spacing.lg} 0;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  color: ${theme.colors.textSecondary};\n`;\nconst SelectedStopsList = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: ${theme.spacing.md} ${theme.spacing.lg};\n`;\nconst SelectedStopItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  margin-bottom: ${theme.spacing.xs};\n  background: ${theme.colors.surface};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  transition: all 0.2s ease-in-out;\n  \n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    transform: translateY(-1px);\n    box-shadow: ${theme.shadows.sm};\n  }\n`;\nconst StopOrder = styled.div`\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: ${theme.colors.primary};\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: ${theme.typography.fontWeight.bold};\n  font-size: ${theme.typography.fontSize.xs};\n  flex-shrink: 0;\n`;\nconst StopInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n_c10 = StopInfo;\nconst StopName = styled.div`\n  font-weight: ${theme.typography.fontWeight.medium};\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n_c11 = StopName;\nconst StopCode = styled.div`\n  color: ${theme.colors.textSecondary};\n  font-size: ${theme.typography.fontSize.xs};\n  margin-top: ${theme.spacing.xs};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n_c12 = StopCode;\nconst RemoveButton = styled.button`\n  color: ${theme.colors.error};\n  padding: ${theme.spacing.xs};\n  border-radius: ${theme.borderRadius.sm};\n  transition: all 0.2s ease-in-out;\n  \n  &:hover {\n    background: rgba(239, 68, 68, 0.1);\n    transform: scale(1.1);\n  }\n`;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: ${theme.spacing.xl};\n  color: ${theme.colors.textMuted};\n`;\nconst MapInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  left: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  max-width: 250px;\n`;\n_c13 = MapInfo;\nconst RouteInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  right: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  min-width: 150px;\n`;\nconst RouteInfoItem = styled.div`\n  margin: 2px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\nconst PopupContent = styled.div`\n  min-width: 200px;\n`;\n_c14 = PopupContent;\nconst PopupTitle = styled.h4`\n  margin: 0 0 ${theme.spacing.sm} 0;\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n`;\n_c15 = PopupTitle;\nconst PopupDetail = styled.div`\n  margin: ${theme.spacing.xs} 0;\n  font-size: ${theme.typography.fontSize.xs};\n  color: ${theme.colors.textSecondary};\n`;\n\n// Component to handle map bounds fitting\n_c16 = PopupDetail;\nconst MapBoundsHandler = ({\n  selectedStops\n}) => {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (selectedStops.length > 0) {\n      // Create bounds from selected stops\n      const bounds = L.latLngBounds(selectedStops.map(stop => [stop.location.lat, stop.location.lon]));\n\n      // Fit the map to show all selected stops with some padding\n      if (selectedStops.length === 1) {\n        // For single stop, just center on it with a reasonable zoom\n        map.setView([selectedStops[0].location.lat, selectedStops[0].location.lon], 14);\n      } else {\n        // For multiple stops, fit bounds with padding\n        map.fitBounds(bounds, {\n          padding: [20, 20],\n          maxZoom: 16\n        });\n      }\n    }\n  }, [map, selectedStops]);\n  return null;\n};\n_s(MapBoundsHandler, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c17 = MapBoundsHandler;\nconst RouteMap = ({\n  stops,\n  selectedStops,\n  center,\n  zoom = 12,\n  showRoute = true,\n  height,\n  onStopClick,\n  onFitRoute,\n  showAllStops = true,\n  onToggleShowAllStops,\n  searchTerm = '',\n  onSearchChange,\n  filteredStops = [],\n  onAddStop\n}) => {\n  _s2();\n  // Default center - Qatar (Doha) if no center provided\n  const defaultCenter = center || {\n    lat: 25.2854,\n    lng: 51.5310\n  };\n\n  // State for route data\n  const [routeData, setRouteData] = useState(null);\n  const [isCalculatingRoute, setIsCalculatingRoute] = useState(false);\n  const [isSearchDropdownOpen, setIsSearchDropdownOpen] = useState(false);\n\n  // Calculate route when selected stops change\n  useEffect(() => {\n    // Create an AbortController for this effect\n    const abortController = new AbortController();\n    let timeoutId;\n    if (selectedStops.length >= 2 && showRoute) {\n      setIsCalculatingRoute(true);\n      const waypoints = selectedStops.map(stop => ({\n        lat: stop.location.lat,\n        lng: stop.location.lon\n      }));\n\n      // Create a stable key for this route calculation\n      //   const routeKey = waypoints.map(w => `${w.lat.toFixed(6)},${w.lng.toFixed(6)}`).join('|');\n\n      // Add a longer delay to avoid excessive API calls during hot reload\n      timeoutId = setTimeout(async () => {\n        // Check if component is still mounted and request not aborted\n        if (abortController.signal.aborted) {\n          return;\n        }\n        try {\n          const route = await RoutingService.calculateRoute(waypoints, abortController.signal);\n\n          // Check again if component is still mounted\n          if (!abortController.signal.aborted) {\n            setRouteData(route);\n            setIsCalculatingRoute(false);\n          }\n        } catch (error) {\n          // Only handle error if not aborted\n          if (!abortController.signal.aborted) {\n            console.error('Failed to calculate route:', error);\n            setIsCalculatingRoute(false);\n            // Fallback to straight line\n            setRouteData({\n              coordinates: waypoints,\n              distance: 0,\n              duration: 0\n            });\n          }\n        }\n      }, 1000); // Increased to 1 second to reduce hot reload requests\n    } else {\n      setRouteData(null);\n      setIsCalculatingRoute(false);\n    }\n\n    // Cleanup function\n    return () => {\n      abortController.abort();\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [selectedStops, showRoute]);\n\n  // Create route line coordinates for Leaflet Polyline\n  const routeCoordinates = routeData ? routeData.coordinates.map(coord => [coord.lat, coord.lng]) : selectedStops.map(stop => [stop.location.lat, stop.location.lon]);\n  return /*#__PURE__*/_jsxDEV(MapWrapper, {\n    children: [onStopClick && /*#__PURE__*/_jsxDEV(MapInfo, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '12px',\n          opacity: 0.8\n        },\n        children: \"\\uD83D\\uDCCD Click stops to add to route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 11\n      }, this), isCalculatingRoute && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '4px',\n          fontSize: '12px',\n          opacity: 0.8,\n          color: '#3b82f6'\n        },\n        children: \"\\uD83D\\uDEE3\\uFE0F Calculating road route...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 13\n      }, this), selectedStops.length === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '4px',\n          fontSize: '12px',\n          opacity: 0.8\n        },\n        children: \"Add another stop to see route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MapSidebar, {\n      children: [/*#__PURE__*/_jsxDEV(SidebarHeader, {\n        children: /*#__PURE__*/_jsxDEV(SidebarTitle, {\n          children: \"\\uD83D\\uDDFA\\uFE0F Route Builder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SidebarContent, {\n        children: [/*#__PURE__*/_jsxDEV(ControlSection, {\n          children: /*#__PURE__*/_jsxDEV(ControlGroup, {\n            children: [onToggleShowAllStops && /*#__PURE__*/_jsxDEV(ToggleButton, {\n              active: showAllStops,\n              onClick: onToggleShowAllStops,\n              children: [\"\\uD83D\\uDCCD \", showAllStops ? 'Hide All Stops' : 'Show All Stops']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 17\n            }, this), selectedStops.length >= 2 && onFitRoute && /*#__PURE__*/_jsxDEV(ActionButton, {\n              onClick: onFitRoute,\n              children: \"\\uD83C\\uDFAF Fit Route to View\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SearchSection, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: `${theme.spacing.lg} ${theme.spacing.lg} 0`\n            },\n            children: /*#__PURE__*/_jsxDEV(SearchInput, {\n              type: \"text\",\n              placeholder: \"Search stops to add...\",\n              value: searchTerm,\n              onChange: e => onSearchChange === null || onSearchChange === void 0 ? void 0 : onSearchChange(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StopsList, {\n            children: filteredStops.map(stop => {\n              const isSelected = selectedStops.some(s => s.id === stop.id);\n              return /*#__PURE__*/_jsxDEV(StopItem, {\n                selected: isSelected,\n                onClick: () => !isSelected && (onAddStop === null || onAddStop === void 0 ? void 0 : onAddStop(stop)),\n                children: [/*#__PURE__*/_jsxDEV(StopInfo, {\n                  children: [/*#__PURE__*/_jsxDEV(StopName, {\n                    children: stop.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(StopCode, {\n                    children: stop.code\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 681,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 21\n                }, this), !isSelected && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: theme.colors.primary,\n                    fontSize: '16px'\n                  },\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 23\n                }, this)]\n              }, stop.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [defaultCenter.lat, defaultCenter.lng],\n      zoom: zoom,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapBoundsHandler, {\n        selectedStops: selectedStops\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 9\n      }, this), stops.map(stop => {\n        const isSelected = selectedStops.some(s => s.id === stop.id);\n        const selectedIndex = selectedStops.findIndex(s => s.id === stop.id);\n\n        // Only show non-selected stops if showAllStops is true\n        if (!isSelected && !showAllStops) {\n          return null;\n        }\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: [stop.location.lat, stop.location.lon],\n          icon: isSelected ? selectedIcon : defaultIcon,\n          eventHandlers: {\n            click: () => {\n              if (onStopClick) {\n                onStopClick(stop);\n              }\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: /*#__PURE__*/_jsxDEV(PopupContent, {\n              children: [/*#__PURE__*/_jsxDEV(PopupTitle, {\n                children: stop.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(PopupDetail, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Code:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 733,\n                  columnNumber: 32\n                }, this), \" \", stop.code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 19\n              }, this), isSelected && /*#__PURE__*/_jsxDEV(PopupDetail, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Order:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 735,\n                  columnNumber: 34\n                }, this), \" #\", selectedIndex + 1, \" in route\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 21\n              }, this), onStopClick && !isSelected && /*#__PURE__*/_jsxDEV(PopupDetail, {\n                style: {\n                  color: theme.colors.primary,\n                  fontWeight: 'bold',\n                  marginTop: '8px'\n                },\n                children: \"Click to add to route\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 15\n          }, this)\n        }, stop.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 13\n        }, this);\n      }), showRoute && selectedStops.length > 1 && routeCoordinates.length > 0 && /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: routeCoordinates,\n        color: routeData ? theme.colors.primary : theme.colors.secondary,\n        weight: routeData ? 5 : 4,\n        opacity: routeData ? 0.9 : 0.6,\n        dashArray: routeData ? undefined : \"10, 5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 610,\n    columnNumber: 5\n  }, this);\n};\n_s2(RouteMap, \"gbKUyq13JV48uwZpruuzJimdM7c=\");\n_c18 = RouteMap;\nexport default RouteMap;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18;\n$RefreshReg$(_c, \"MapWrapper\");\n$RefreshReg$(_c2, \"MapSidebar\");\n$RefreshReg$(_c3, \"SidebarHeader\");\n$RefreshReg$(_c4, \"SidebarTitle\");\n$RefreshReg$(_c5, \"SidebarContent\");\n$RefreshReg$(_c6, \"ControlSection\");\n$RefreshReg$(_c7, \"ControlGroup\");\n$RefreshReg$(_c8, \"ToggleButton\");\n$RefreshReg$(_c9, \"ActionButton\");\n$RefreshReg$(_c0, \"SearchSection\");\n$RefreshReg$(_c1, \"SearchInput\");\n$RefreshReg$(_c10, \"StopInfo\");\n$RefreshReg$(_c11, \"StopName\");\n$RefreshReg$(_c12, \"StopCode\");\n$RefreshReg$(_c13, \"MapInfo\");\n$RefreshReg$(_c14, \"PopupContent\");\n$RefreshReg$(_c15, \"PopupTitle\");\n$RefreshReg$(_c16, \"PopupDetail\");\n$RefreshReg$(_c17, \"MapBoundsHandler\");\n$RefreshReg$(_c18, \"RouteMap\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Polyline","Popup","useMap","L","styled","theme","RoutingService","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","createCustomIcon","color","divIcon","className","html","iconSize","iconAnchor","popupAnchor","defaultIcon","selectedIcon","MapWrapper","div","height","colors","border","borderRadius","lg","surface","card","textPrimary","cardHover","md","shadows","_c","MapSidebar","_c2","SidebarHeader","spacing","_c3","SidebarTitle","h3","typography","fontSize","fontWeight","semibold","sm","_c4","SidebarContent","_c5","ControlSection","_c6","ControlGroup","_c7","ToggleButton","button","active","primary","medium","surfaceHover","_c8","ActionButton","_c9","SearchSection","_c0","SearchContainer","SearchInput","input","textMuted","_c1","SearchDropdown","isOpen","DropdownItem","selected","DropdownItemInfo","DropdownItemName","DropdownItemCode","textSecondary","xs","NoResults","SelectedStopsSection","SelectedStopsHeader","SelectedStopsList","SelectedStopItem","StopOrder","bold","StopInfo","_c10","StopName","_c11","StopCode","_c12","RemoveButton","error","EmptyState","xl","MapInfo","_c13","RouteInfo","RouteInfoItem","PopupContent","_c14","PopupTitle","h4","_c15","PopupDetail","_c16","MapBoundsHandler","selectedStops","_s","map","length","bounds","latLngBounds","stop","location","lat","lon","setView","fitBounds","padding","maxZoom","_c17","RouteMap","stops","center","zoom","showRoute","onStopClick","onFitRoute","showAllStops","onToggleShowAllStops","searchTerm","onSearchChange","filteredStops","onAddStop","_s2","defaultCenter","lng","routeData","setRouteData","isCalculatingRoute","setIsCalculatingRoute","isSearchDropdownOpen","setIsSearchDropdownOpen","abortController","AbortController","timeoutId","waypoints","setTimeout","signal","aborted","route","calculateRoute","console","coordinates","distance","duration","abort","clearTimeout","routeCoordinates","coord","children","style","opacity","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","onClick","type","placeholder","value","onChange","e","target","StopsList","isSelected","some","s","id","StopItem","name","code","width","attribution","url","selectedIndex","findIndex","position","icon","eventHandlers","click","positions","secondary","weight","dashArray","undefined","_c18","$RefreshReg$"],"sources":["/home/mhmdal/Projects/moveo/src/components/Map/RouteMap.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Polyline, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport styled from 'styled-components';\nimport { theme } from '../../styles/theme';\nimport { Stop } from '../../types';\nimport { RoutingService, RouteResponse, RouteCoordinate } from '../../services/routingService';\n\n// Fix for default markers in React Leaflet\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\n// Create custom colored markers\nconst createCustomIcon = (color: string) => {\n  return L.divIcon({\n    className: 'custom-marker',\n    html: `\n      <div style=\"\n        background-color: ${color};\n        width: 25px;\n        height: 25px;\n        border-radius: 50% 50% 50% 0;\n        border: 3px solid white;\n        transform: rotate(-45deg);\n        box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      \">\n        <div style=\"\n          transform: rotate(45deg);\n          color: white;\n          font-weight: bold;\n          font-size: 12px;\n        \"></div>\n      </div>\n    `,\n    iconSize: [25, 25],\n    iconAnchor: [12, 24],\n    popupAnchor: [0, -24]\n  });\n};\n\n// Default blue marker for available stops\nconst defaultIcon = createCustomIcon('#3b82f6');\n\n// Green marker for selected stops in route\nconst selectedIcon = createCustomIcon('#10b981');\n\nconst MapWrapper = styled.div<{ height?: string }>`\n  width: 100%;\n  height: ${({ height }) => height || '500px'};\n  border: 2px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.lg};\n  overflow: hidden;\n  position: relative;\n  \n  .leaflet-container {\n    height: 100%;\n    width: 100%;\n    background: ${theme.colors.surface};\n  }\n  \n  .leaflet-control-container {\n    .leaflet-control-zoom {\n      background: ${theme.colors.card};\n      border: 1px solid ${theme.colors.border};\n      \n      a {\n        background: ${theme.colors.card};\n        color: ${theme.colors.textPrimary};\n        border-bottom: 1px solid ${theme.colors.border};\n        \n        &:hover {\n          background: ${theme.colors.cardHover};\n        }\n        \n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n    \n    .leaflet-control-attribution {\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      font-size: 11px;\n      \n      a {\n        color: #3b82f6;\n      }\n    }\n  }\n  \n  .leaflet-popup-content-wrapper {\n    background: ${theme.colors.card};\n    color: ${theme.colors.textPrimary};\n    border-radius: ${theme.borderRadius.md};\n    box-shadow: ${theme.shadows.lg};\n  }\n  \n  .leaflet-popup-tip {\n    background: ${theme.colors.card};\n  }\n\n  /* Custom marker styles for interactive stops */\n  .leaflet-marker-icon {\n    cursor: pointer;\n    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;\n    \n    &:hover {\n      transform: scale(1.1);\n      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));\n    }\n  }\n\n  /* Custom marker styling */\n  .custom-marker {\n    background: transparent !important;\n    border: none !important;\n  }\n`;\n\nconst MapSidebar = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 300px;\n  height: 100%;\n  background: ${theme.colors.card};\n  border-left: 1px solid ${theme.colors.border};\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst SidebarHeader = styled.div`\n  padding: ${theme.spacing.lg};\n  border-bottom: 1px solid ${theme.colors.border};\n  background: ${theme.colors.surface};\n`;\n\nconst SidebarTitle = styled.h3`\n  margin: 0;\n  font-size: ${theme.typography.fontSize.lg};\n  font-weight: ${theme.typography.fontWeight.semibold};\n  color: ${theme.colors.textPrimary};\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\n\nconst SidebarContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst ControlSection = styled.div`\n  padding: ${theme.spacing.lg};\n  border-bottom: 1px solid ${theme.colors.border};\n`;\n\nconst ControlGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: ${theme.spacing.md};\n`;\n\nconst ToggleButton = styled.button<{ active: boolean }>`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border: 1px solid ${({ active }) => active ? theme.colors.primary : theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  background: ${({ active }) => active ? theme.colors.primary : theme.colors.surface};\n  color: ${({ active }) => active ? 'white' : theme.colors.textPrimary};\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  \n  &:hover {\n    background: ${({ active }) => active ? theme.colors.primary : theme.colors.surfaceHover};\n    transform: translateY(-1px);\n  }\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  background: ${theme.colors.surface};\n  color: ${theme.colors.textPrimary};\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  \n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    transform: translateY(-1px);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst SearchSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst SearchContainer = styled.div`\n  position: relative;\n  padding: ${theme.spacing.lg};\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  background: ${theme.colors.surface};\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n  transition: all 0.2s ease-in-out;\n  \n  &:focus {\n    outline: none;\n    border-color: ${theme.colors.primary};\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n  \n  &::placeholder {\n    color: ${theme.colors.textMuted};\n  }\n`;\n\nconst SearchDropdown = styled.div<{ isOpen: boolean }>`\n  position: absolute;\n  top: 100%;\n  left: ${theme.spacing.lg};\n  right: ${theme.spacing.lg};\n  background: ${theme.colors.card};\n  border: 1px solid ${theme.colors.border};\n  border-top: none;\n  border-radius: 0 0 ${theme.borderRadius.md} ${theme.borderRadius.md};\n  box-shadow: ${theme.shadows.lg};\n  z-index: 1000;\n  max-height: 200px;\n  overflow-y: auto;\n  transform: translateY(${({ isOpen }) => isOpen ? '0' : '-10px'});\n  opacity: ${({ isOpen }) => isOpen ? '1' : '0'};\n  visibility: ${({ isOpen }) => isOpen ? 'visible' : 'hidden'};\n  transition: all 0.2s ease-in-out;\n`;\n\nconst DropdownItem = styled.div<{ selected?: boolean }>`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border-bottom: 1px solid ${theme.colors.border};\n  \n  ${({ selected }) => selected ? `\n    background: rgba(59, 130, 246, 0.1);\n    color: ${theme.colors.primary};\n  ` : `\n    background: ${theme.colors.surface};\n    \n    &:hover {\n      background: ${theme.colors.surfaceHover};\n    }\n  `}\n  \n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst DropdownItemInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n\nconst DropdownItemName = styled.div`\n  font-weight: ${theme.typography.fontWeight.medium};\n  color: inherit;\n  font-size: ${theme.typography.fontSize.sm};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst DropdownItemCode = styled.div`\n  color: ${theme.colors.textSecondary};\n  font-size: ${theme.typography.fontSize.xs};\n  margin-top: ${theme.spacing.xs};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst NoResults = styled.div`\n  padding: ${theme.spacing.md};\n  text-align: center;\n  color: ${theme.colors.textMuted};\n  font-size: ${theme.typography.fontSize.sm};\n`;\n\nconst SelectedStopsSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst SelectedStopsHeader = styled.div`\n  padding: ${theme.spacing.lg} ${theme.spacing.lg} 0;\n  font-size: ${theme.typography.fontSize.sm};\n  font-weight: ${theme.typography.fontWeight.medium};\n  color: ${theme.colors.textSecondary};\n`;\n\nconst SelectedStopsList = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: ${theme.spacing.md} ${theme.spacing.lg};\n`;\n\nconst SelectedStopItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  margin-bottom: ${theme.spacing.xs};\n  background: ${theme.colors.surface};\n  border: 1px solid ${theme.colors.border};\n  border-radius: ${theme.borderRadius.md};\n  transition: all 0.2s ease-in-out;\n  \n  &:hover {\n    background: ${theme.colors.surfaceHover};\n    transform: translateY(-1px);\n    box-shadow: ${theme.shadows.sm};\n  }\n`;\n\nconst StopOrder = styled.div`\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: ${theme.colors.primary};\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: ${theme.typography.fontWeight.bold};\n  font-size: ${theme.typography.fontSize.xs};\n  flex-shrink: 0;\n`;\n\nconst StopInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n\nconst StopName = styled.div`\n  font-weight: ${theme.typography.fontWeight.medium};\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst StopCode = styled.div`\n  color: ${theme.colors.textSecondary};\n  font-size: ${theme.typography.fontSize.xs};\n  margin-top: ${theme.spacing.xs};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst RemoveButton = styled.button`\n  color: ${theme.colors.error};\n  padding: ${theme.spacing.xs};\n  border-radius: ${theme.borderRadius.sm};\n  transition: all 0.2s ease-in-out;\n  \n  &:hover {\n    background: rgba(239, 68, 68, 0.1);\n    transform: scale(1.1);\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: ${theme.spacing.xl};\n  color: ${theme.colors.textMuted};\n`;\n\nconst MapInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  left: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  max-width: 250px;\n`;\n\nconst RouteInfo = styled.div`\n  position: absolute;\n  top: ${theme.spacing.md};\n  right: ${theme.spacing.md};\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: ${theme.spacing.sm} ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.typography.fontSize.sm};\n  z-index: 1000;\n  pointer-events: none;\n  min-width: 150px;\n`;\n\nconst RouteInfoItem = styled.div`\n  margin: 2px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n`;\n\nconst PopupContent = styled.div`\n  min-width: 200px;\n`;\n\nconst PopupTitle = styled.h4`\n  margin: 0 0 ${theme.spacing.sm} 0;\n  color: ${theme.colors.textPrimary};\n  font-size: ${theme.typography.fontSize.sm};\n`;\n\nconst PopupDetail = styled.div`\n  margin: ${theme.spacing.xs} 0;\n  font-size: ${theme.typography.fontSize.xs};\n  color: ${theme.colors.textSecondary};\n`;\n\n// Component to handle map bounds fitting\nconst MapBoundsHandler: React.FC<{ selectedStops: Stop[] }> = ({ selectedStops }) => {\n  const map = useMap();\n\n  useEffect(() => {\n    if (selectedStops.length > 0) {\n      // Create bounds from selected stops\n      const bounds = L.latLngBounds(\n        selectedStops.map(stop => [stop.location.lat, stop.location.lon])\n      );\n\n      // Fit the map to show all selected stops with some padding\n      if (selectedStops.length === 1) {\n        // For single stop, just center on it with a reasonable zoom\n        map.setView([selectedStops[0].location.lat, selectedStops[0].location.lon], 14);\n      } else {\n        // For multiple stops, fit bounds with padding\n        map.fitBounds(bounds, { \n          padding: [20, 20],\n          maxZoom: 16 \n        });\n      }\n    }\n  }, [map, selectedStops]);\n\n  return null;\n};\n\ninterface RouteMapProps {\n  stops: Stop[];\n  selectedStops: Stop[];\n  center?: { lat: number; lng: number };\n  zoom?: number;\n  showRoute?: boolean;\n  height?: string;\n  onStopClick?: (stop: Stop) => void;\n  onFitRoute?: () => void;\n  showAllStops?: boolean;\n  onToggleShowAllStops?: () => void;\n  searchTerm?: string;\n  onSearchChange?: (term: string) => void;\n  filteredStops?: Stop[];\n  onAddStop?: (stop: Stop) => void;\n}\n\nconst RouteMap: React.FC<RouteMapProps> = ({ \n  stops,\n  selectedStops,\n  center,\n  zoom = 12,\n  showRoute = true,\n  height,\n  onStopClick,\n  onFitRoute,\n  showAllStops = true,\n  onToggleShowAllStops,\n  searchTerm = '',\n  onSearchChange,\n  filteredStops = [],\n  onAddStop\n}) => {\n  // Default center - Qatar (Doha) if no center provided\n  const defaultCenter = center || { lat: 25.2854, lng: 51.5310 };\n  \n  // State for route data\n  const [routeData, setRouteData] = useState<RouteResponse | null>(null);\n  const [isCalculatingRoute, setIsCalculatingRoute] = useState(false);\n  const [isSearchDropdownOpen, setIsSearchDropdownOpen] = useState(false);\n\n  // Calculate route when selected stops change\n  useEffect(() => {\n    // Create an AbortController for this effect\n    const abortController = new AbortController();\n    let timeoutId: NodeJS.Timeout;\n\n    if (selectedStops.length >= 2 && showRoute) {\n      setIsCalculatingRoute(true);\n      \n      const waypoints: RouteCoordinate[] = selectedStops.map(stop => ({\n        lat: stop.location.lat,\n        lng: stop.location.lon\n      }));\n\n      // Create a stable key for this route calculation\n    //   const routeKey = waypoints.map(w => `${w.lat.toFixed(6)},${w.lng.toFixed(6)}`).join('|');\n      \n      // Add a longer delay to avoid excessive API calls during hot reload\n      timeoutId = setTimeout(async () => {\n        // Check if component is still mounted and request not aborted\n        if (abortController.signal.aborted) {\n          return;\n        }\n\n        try {\n          const route = await RoutingService.calculateRoute(waypoints, abortController.signal);\n          \n          // Check again if component is still mounted\n          if (!abortController.signal.aborted) {\n            setRouteData(route);\n            setIsCalculatingRoute(false);\n          }\n        } catch (error) {\n          // Only handle error if not aborted\n          if (!abortController.signal.aborted) {\n            console.error('Failed to calculate route:', error);\n            setIsCalculatingRoute(false);\n            // Fallback to straight line\n            setRouteData({\n              coordinates: waypoints,\n              distance: 0,\n              duration: 0\n            });\n          }\n        }\n      }, 1000); // Increased to 1 second to reduce hot reload requests\n\n    } else {\n      setRouteData(null);\n      setIsCalculatingRoute(false);\n    }\n\n    // Cleanup function\n    return () => {\n      abortController.abort();\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [selectedStops, showRoute]);\n\n  // Create route line coordinates for Leaflet Polyline\n  const routeCoordinates: [number, number][] = routeData \n    ? routeData.coordinates.map(coord => [coord.lat, coord.lng])\n    : selectedStops.map(stop => [stop.location.lat, stop.location.lon]);\n\n  return (\n    <MapWrapper>\n      {onStopClick && (\n        <MapInfo>\n          <div style={{ fontSize: '12px', opacity: 0.8 }}>\n            üìç Click stops to add to route\n          </div>\n          {isCalculatingRoute && (\n            <div style={{ marginTop: '4px', fontSize: '12px', opacity: 0.8, color: '#3b82f6' }}>\n              üõ£Ô∏è Calculating road route...\n            </div>\n          )}\n          {selectedStops.length === 1 && (\n            <div style={{ marginTop: '4px', fontSize: '12px', opacity: 0.8 }}>\n              Add another stop to see route\n            </div>\n          )}\n        </MapInfo>\n      )}\n      \n      \n      {/* Map Sidebar */}\n      <MapSidebar>\n        <SidebarHeader>\n          <SidebarTitle>\n            üó∫Ô∏è Route Builder\n          </SidebarTitle>\n        </SidebarHeader>\n        \n        <SidebarContent>\n          {/* Controls Section */}\n          <ControlSection>\n            <ControlGroup>\n              {onToggleShowAllStops && (\n                <ToggleButton\n                  active={showAllStops}\n                  onClick={onToggleShowAllStops}\n                >\n                  üìç {showAllStops ? 'Hide All Stops' : 'Show All Stops'}\n                </ToggleButton>\n              )}\n              \n              {selectedStops.length >= 2 && onFitRoute && (\n                <ActionButton onClick={onFitRoute}>\n                  üéØ Fit Route to View\n                </ActionButton>\n              )}\n            </ControlGroup>\n          </ControlSection>\n          \n          {/* Search Section */}\n          <SearchSection>\n            <div style={{ padding: `${theme.spacing.lg} ${theme.spacing.lg} 0` }}>\n              <SearchInput\n                type=\"text\"\n                placeholder=\"Search stops to add...\"\n                value={searchTerm}\n                onChange={(e) => onSearchChange?.(e.target.value)}\n              />\n            </div>\n            \n            <StopsList>\n              {filteredStops.map((stop) => {\n                const isSelected = selectedStops.some(s => s.id === stop.id);\n                return (\n                  <StopItem\n                    key={stop.id}\n                    selected={isSelected}\n                    onClick={() => !isSelected && onAddStop?.(stop)}\n                  >\n                    <StopInfo>\n                      <StopName>{stop.name}</StopName>\n                      <StopCode>{stop.code}</StopCode>\n                    </StopInfo>\n                    {!isSelected && (\n                      <div style={{ color: theme.colors.primary, fontSize: '16px' }}>+</div>\n                    )}\n                  </StopItem>\n                );\n              })}\n            </StopsList>\n          </SearchSection>\n        </SidebarContent>\n      </MapSidebar>\n      \n      <MapContainer\n        center={[defaultCenter.lat, defaultCenter.lng]}\n        zoom={zoom}\n        style={{ height: '100%', width: '100%' }}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        {/* Handle automatic bounds fitting when stops change */}\n        <MapBoundsHandler selectedStops={selectedStops} />\n        \n        {/* Show all available stops */}\n        {stops.map((stop) => {\n          const isSelected = selectedStops.some(s => s.id === stop.id);\n          const selectedIndex = selectedStops.findIndex(s => s.id === stop.id);\n          \n          // Only show non-selected stops if showAllStops is true\n          if (!isSelected && !showAllStops) {\n            return null;\n          }\n          \n          return (\n            <Marker\n              key={stop.id}\n              position={[stop.location.lat, stop.location.lon]}\n              icon={isSelected ? selectedIcon : defaultIcon}\n              eventHandlers={{\n                click: () => {\n                  if (onStopClick) {\n                    onStopClick(stop);\n                  }\n                }\n              }}\n            >\n              <Popup>\n                <PopupContent>\n                  <PopupTitle>{stop.name}</PopupTitle>\n                  <PopupDetail><strong>Code:</strong> {stop.code}</PopupDetail>\n                  {isSelected && (\n                    <PopupDetail><strong>Order:</strong> #{selectedIndex + 1} in route</PopupDetail>\n                  )}\n                  {onStopClick && !isSelected && (\n                    <PopupDetail style={{ color: theme.colors.primary, fontWeight: 'bold', marginTop: '8px' }}>\n                      Click to add to route\n                    </PopupDetail>\n                  )}\n                </PopupContent>\n              </Popup>\n            </Marker>\n          );\n        })}\n        \n        {/* Show route line */}\n        {showRoute && selectedStops.length > 1 && routeCoordinates.length > 0 && (\n          <Polyline\n            positions={routeCoordinates}\n            color={routeData ? theme.colors.primary : theme.colors.secondary}\n            weight={routeData ? 5 : 4}\n            opacity={routeData ? 0.9 : 0.6}\n            dashArray={routeData ? undefined : \"10, 5\"}\n          />\n        )}\n      </MapContainer>\n    </MapWrapper>\n  );\n};\n\nexport default RouteMap;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,MAAM,QAAQ,eAAe;AACxF,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,KAAK,QAAQ,oBAAoB;AAE1C,SAASC,cAAc,QAAwC,+BAA+B;;AAE9F;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAQL,CAAC,CAACM,IAAI,CAACC,OAAO,CAACC,SAAS,CAASC,WAAW;AACpDT,CAAC,CAACM,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,aAAa,EAAE,gFAAgF;EAC/FC,OAAO,EAAE,6EAA6E;EACtFC,SAAS,EAAE;AACb,CAAC,CAAC;;AAEF;AACA,MAAMC,gBAAgB,GAAIC,KAAa,IAAK;EAC1C,OAAOf,CAAC,CAACgB,OAAO,CAAC;IACfC,SAAS,EAAE,eAAe;IAC1BC,IAAI,EAAE;AACV;AACA,4BAA4BH,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;IACDI,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;EACtB,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,MAAMC,WAAW,GAAGR,gBAAgB,CAAC,SAAS,CAAC;;AAE/C;AACA,MAAMS,YAAY,GAAGT,gBAAgB,CAAC,SAAS,CAAC;AAEhD,MAAMU,UAAU,GAAGvB,MAAM,CAACwB,GAAwB;AAClD;AACA,YAAY,CAAC;EAAEC;AAAO,CAAC,KAAKA,MAAM,IAAI,OAAO;AAC7C,sBAAsBxB,KAAK,CAACyB,MAAM,CAACC,MAAM;AACzC,mBAAmB1B,KAAK,CAAC2B,YAAY,CAACC,EAAE;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB5B,KAAK,CAACyB,MAAM,CAACI,OAAO;AACtC;AACA;AACA;AACA;AACA,oBAAoB7B,KAAK,CAACyB,MAAM,CAACK,IAAI;AACrC,0BAA0B9B,KAAK,CAACyB,MAAM,CAACC,MAAM;AAC7C;AACA;AACA,sBAAsB1B,KAAK,CAACyB,MAAM,CAACK,IAAI;AACvC,iBAAiB9B,KAAK,CAACyB,MAAM,CAACM,WAAW;AACzC,mCAAmC/B,KAAK,CAACyB,MAAM,CAACC,MAAM;AACtD;AACA;AACA,wBAAwB1B,KAAK,CAACyB,MAAM,CAACO,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkBhC,KAAK,CAACyB,MAAM,CAACK,IAAI;AACnC,aAAa9B,KAAK,CAACyB,MAAM,CAACM,WAAW;AACrC,qBAAqB/B,KAAK,CAAC2B,YAAY,CAACM,EAAE;AAC1C,kBAAkBjC,KAAK,CAACkC,OAAO,CAACN,EAAE;AAClC;AACA;AACA;AACA,kBAAkB5B,KAAK,CAACyB,MAAM,CAACK,IAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACK,EAAA,GAxEIb,UAAU;AA0EhB,MAAMc,UAAU,GAAGrC,MAAM,CAACwB,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA,gBAAgBvB,KAAK,CAACyB,MAAM,CAACK,IAAI;AACjC,2BAA2B9B,KAAK,CAACyB,MAAM,CAACC,MAAM;AAC9C;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GAZID,UAAU;AAchB,MAAME,aAAa,GAAGvC,MAAM,CAACwB,GAAG;AAChC,aAAavB,KAAK,CAACuC,OAAO,CAACX,EAAE;AAC7B,6BAA6B5B,KAAK,CAACyB,MAAM,CAACC,MAAM;AAChD,gBAAgB1B,KAAK,CAACyB,MAAM,CAACI,OAAO;AACpC,CAAC;AAACW,GAAA,GAJIF,aAAa;AAMnB,MAAMG,YAAY,GAAG1C,MAAM,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}